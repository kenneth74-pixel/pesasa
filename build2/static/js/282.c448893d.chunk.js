"use strict";(self.webpackChunkpesasa=self.webpackChunkpesasa||[]).push([[282],{82863:(e,a,l)=>{l.r(a),l.d(a,{FilteringTable:()=>w,default:()=>S});var s=l(72791),n=l(91523),t=l(33615),o=l(66659),c=l(71358),r=l(92396),i=l(97311),d=(l(25161),l(62062)),m=l.n(d),x=l(34978),u=l(6639),h=l(2499),p=l(65661),f=l(5289),N=l(39157),j=l(97123),b=l(18622),v=(l(43241),l(5970)),g=l(59513),y=l.n(g),C=l(80184);const w=()=>{const e={input:e=>({...e,"padding-top":"12px","padding-bottom":"12px"}),placeholder:e=>({...e,color:"#00aff0"}),control:e=>({...e,border:"black solid 1px !important"})},[a,l]=(0,s.useState)([]),[d,g]=(0,s.useState)(!1),[w,S]=(0,s.useState)([]),[k,D]=(0,s.useState)(!1),[P,A]=(0,s.useState)({id:null,fname:"",lname:"",employeeStatus:"",oname:"",gender:"",nationality:"",nid:"",marital:"Single",image:"",depend:"",email:"",number:"",town:"",street:"",code:"",country:"Uganda",password:"changemenow",city:"",accountStatus:"ACTIVE",dob:new Date});function q(e,a){!function(e){S([]),(0,x.C1)(e).then((e=>{S(e)})).catch((e=>{console.log(e),m()("Oops",e.message,"error")}))}({process:a,processId:e.id}),g(!0)}function E(){(0,x.An)().then((e=>{l(e)})).catch((e=>{console.log(e),m()("Oops",e.message,"error")}))}a.map(((e,a)=>{e.name=e.lname+" "+e.fname,e.dateAdd=e.dateAdded.split("T")[0],e.actions=(0,C.jsxs)("div",{className:"d-flex",children:[(0,C.jsx)("button",{type:"button",className:"btn btn-primary shadow btn-xs sharp me-1",onClick:()=>{return(a=e).dob=new Date(a.dob),console.log(a),A(a),void z(!0);var a},"data-dismiss":"modal",children:(0,C.jsx)("i",{className:"fa fa-pencil"})}),(0,C.jsx)("button",{onClick:()=>m()({title:"Are you sure?",text:"Once deleted, you will not be able to recover this information!",icon:"warning",buttons:!0,dangerMode:!0}).then((a=>{a?(0,x.Lj)(e.id).then((e=>{m()("Poof! Director record has been deleted!",{icon:"success"}),E()})).catch((e=>{console.log(e),m()("Oops",e.message,"error")})):m()("Your information is safe!")})),className:"btn btn-danger shadow btn-xs sharp",children:(0,C.jsx)("i",{className:"fa fa-trash"})}),(0,C.jsx)("button",{type:"button",style:{marginLeft:"5px"},className:"btn btn-success shadow btn-xs sharp me-1",onClick:()=>q(e,"directors"),"data-dismiss":"modal",children:(0,C.jsx)("i",{className:"fa fa-eye"})})]})})),(0,s.useEffect)((()=>{E()}),[]);const M=function(e,a){const l=[];for(var s=e;s<a;s++)l.push(s);return l.push(a),l}(1920,(new Date).getFullYear()),F=["January","February","March","April","May","June","July","August","September","October","November","December"],O=v.n.map((e=>({value:e.dial_code,label:e.name+" ("+e.dial_code+" )"}))),I=v.n.map((e=>(0,C.jsxs)("option",{value:e.name,children:[" "," "+e.name+" "]}))),Z=v.E.map((e=>({value:e,label:e}))),[T,z]=(0,s.useState)(!1),B=(0,s.useMemo)((()=>i.L),[]),G=(0,s.useMemo)((()=>r),[]),U=(0,c.useTable)({columns:B,data:G,initialState:{pageIndex:0}},c.useFilters,c.useGlobalFilter,c.usePagination),[V,H]=(0,s.useState)([]);const L=e=>{e.preventDefault();const a=e.target.getAttribute("name"),l=e.target.value,s={...P};s[a]=l,A(s)},{getTableProps:R,getTableBodyProps:Y,headerGroups:_,prepareRow:J,state:W,page:$,gotoPage:K,pageCount:Q,pageOptions:X,nextPage:ee,previousPage:ae,canNextPage:le,canPreviousPage:se,setGlobalFilter:ne}=U,{globalFilter:te,pageIndex:oe}=W;return w.map((e=>{e.type="VERIFIED"===e.type?(0,C.jsxs)("div",{style:{color:"green"},children:[e.type," ",(0,C.jsx)("i",{className:"fa fa-check"})]}):"DECLINED"===e.type?(0,C.jsxs)("div",{style:{color:"red"},children:[e.type," ",(0,C.jsx)("i",{className:"fa fa-times"})]}):e.type,e.dateAdded=new Date(e.dateAdded).toDateString()})),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(f.Z,{disableEnforceFocus:!0,fullWidth:!0,maxWidth:"lg",open:d,onClose:g,children:[(0,C.jsx)(p.Z,{children:(0,C.jsx)("h4",{children:"Approval Detail"})}),(0,C.jsx)(N.Z,{children:(0,C.jsx)(u.Z,{hideDataExport:!0,rows:w,columns:[{name:"dateAdded",title:"Date"},{name:"user",title:"User"},{name:"type",title:"Action"},{name:"comment",title:"Comment"}],defaultExpandedGroups:[],grouping:[],defaultHiddenColumnNames:[],defaultPageSize:0,hideSelectionExport:!0,infiniteScrolling:!0,fileName:"Directors"})}),(0,C.jsx)(j.Z,{style:{width:"100%",overflow:"hidden"},children:(0,C.jsx)("button",{type:"button",className:"btn shadow btn-xs btn-primary",onClick:()=>g(!1),"data-dismiss":"modal",children:"Close"})})]}),(0,C.jsx)(o.Z,{activeMenu:"Directors",motherMenu:"Company Staff"}),(0,C.jsxs)("div",{className:"card",children:[(0,C.jsx)("div",{className:"card-header",children:(0,C.jsxs)("div",{className:"row",children:[(0,C.jsx)("div",{className:"col-xl-3 col-xxl-6",children:(0,C.jsx)("h4",{className:"card-title",children:"Company Directors"})}),(0,C.jsx)("div",{className:"col-xl-3 col-xxl-6",children:(0,C.jsx)(n.rU,{className:"btn btn-primary font-w600 mb-2 me-auto",onClick:()=>(A({id:null,fname:"",lname:"",oname:"",gender:"",nationality:"",nid:"",marital:"Single",image:"",depend:"",email:"",number:"",town:"",street:"",code:"",country:"Uganda",password:"changemenow",city:"",accountStatus:"ACTIVE",dob:new Date}),void z(!0)),children:"+ Add New Director"})})]})}),(0,C.jsx)("div",{className:"card-body",children:(0,C.jsx)(u.Z,{hideDataExport:!0,rows:a,columns:[{name:"dateAdd",title:"Date Added"},{name:"addedBy",title:"Added By"},{name:"name",title:"Name"},{name:"email",title:"Email"},{name:"accountStatus",title:"Status"},{name:"actions",title:"Actions"}],defaultExpandedGroups:[],grouping:[],defaultHiddenColumnNames:[],defaultPageSize:0,hideSelectionExport:!0,infiniteScrolling:!0,fileName:"Directors"})}),(0,C.jsx)(t.Z,{className:"fade bd-example-modal-lg",size:"lg",show:T,onHide:z,children:(0,C.jsx)("div",{className:"",role:"document",children:(0,C.jsx)("div",{className:"",children:(0,C.jsxs)("form",{children:[(0,C.jsxs)("div",{className:"modal-header",children:[(0,C.jsx)("h4",{className:"modal-title fs-20",children:"Add Director"}),(0,C.jsx)("button",{type:"button",className:"btn-close",onClick:()=>z(!1),"data-dismiss":"modal"})]}),(0,C.jsxs)("div",{className:"modal-body",children:[(0,C.jsx)("i",{className:"flaticon-cancel-12 close"}),(0,C.jsx)("div",{className:"add-contact-box",children:(0,C.jsxs)("div",{className:"add-contact-content",children:[(0,C.jsxs)("div",{className:"row",children:[(0,C.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,C.jsxs)("div",{className:"form-group mb-3",children:[(0,C.jsx)("label",{className:"text-black font-w500",children:"First Name"}),(0,C.jsxs)("div",{className:"contact-name",children:[(0,C.jsx)("input",{type:"text",className:"form-control",autoComplete:"off",value:P.fname,name:"fname",required:"required",onChange:L,placeholder:"First Name"}),(0,C.jsx)("span",{className:"validation-text"})]})]})}),(0,C.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,C.jsxs)("div",{className:"form-group mb-3",children:[(0,C.jsx)("label",{className:"text-black font-w500",children:"Surname"}),(0,C.jsxs)("div",{className:"contact-name",children:[(0,C.jsx)("input",{type:"text",value:P.lname,className:"form-control",autoComplete:"off",name:"lname",required:"required",onChange:L,placeholder:"Surname"}),(0,C.jsx)("span",{className:"validation-text"})]})]})})]}),(0,C.jsxs)("div",{className:"row",children:[(0,C.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,C.jsxs)("div",{className:"form-group mb-3",children:[(0,C.jsx)("label",{className:"text-black font-w500",children:"Other Name"}),(0,C.jsxs)("div",{className:"contact-name",children:[(0,C.jsx)("input",{type:"text",value:P.oname,className:"form-control",autoComplete:"off",name:"oname",required:"required",onChange:L,placeholder:"Other Name"}),(0,C.jsx)("span",{className:"validation-text"})]})]})}),(0,C.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,C.jsxs)("div",{className:"form-group mb-3",children:[(0,C.jsx)("label",{className:"text-black font-w500",children:"Gender"}),(0,C.jsx)("div",{className:"contact-name",children:(0,C.jsxs)("div",{className:"form-group mb-0",children:[(0,C.jsxs)("label",{className:"radio-inline me-3",children:[(0,C.jsx)("input",{required:"required",checked:"male"===P.gender,value:"male",onChange:L,type:"radio",name:"gender"})," Male"]}),(0,C.jsxs)("label",{className:"radio-inline me-3",children:[(0,C.jsx)("input",{required:"required",checked:"female"===P.gender,value:"female",onChange:L,type:"radio",name:"gender"})," Female"]})]})})]})})]}),(0,C.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,C.jsxs)("div",{className:"form-group mb-3",children:[(0,C.jsx)("label",{className:"text-black font-w500",children:"Employement Type / Status (self employed)"}),(0,C.jsxs)("div",{className:"contact-name",children:[(0,C.jsx)("input",{type:"text",value:P.employeeStatus,className:"form-control",autoComplete:"off",name:"Emstatus",required:"required",onChange:L,placeholder:"Employement Status"}),(0,C.jsx)("span",{className:"validation-text"})]})]})}),(0,C.jsxs)("div",{className:"row",children:[(0,C.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,C.jsxs)("div",{className:"form-group mb-3",children:[(0,C.jsx)("label",{className:"text-black font-w500",children:"Nationality"}),(0,C.jsx)("div",{className:"form-group mb-3",children:(0,C.jsx)(b.ZP,{value:""===P.nationality?"":{value:P.nationality,label:P.nationality},onChange:e=>{const a={...P};a.nationality=e.value,A(a)},styles:e,placeholder:"Search & Select Nationality",classNamePrefix:"form-control",theme:e=>({...e,borderRadius:"0.75rem",width:"100%",fontSize:"0.875rem",fontWeight:400,lineHeight:1.5,color:"#969ba0",backgroundColor:"#fff",display:"block",appearance:"none",backgroundClip:"padding-box",transition:"border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out",colors:{...e.colors,primary:"black"}}),options:Z})})]})}),(0,C.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,C.jsxs)("div",{className:"form-group mb-3",children:[(0,C.jsx)("label",{className:"text-black font-w500",children:"National Identification No. (NIN) / Passport No"}),(0,C.jsx)("div",{className:"contact-name",children:(0,C.jsx)("div",{className:"form-group mb-0",children:(0,C.jsx)("input",{value:P.nid,type:"text",className:"form-control",autoComplete:"off",name:"nid",required:"required",onChange:L,placeholder:"ID No."})})})]})})]}),(0,C.jsxs)("div",{className:"row",children:[(0,C.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,C.jsxs)("div",{className:"form-group mb-3",children:[(0,C.jsx)("label",{className:"text-black font-w500",children:"Marital Status"}),(0,C.jsx)("div",{className:"form-group mb-3",children:(0,C.jsxs)("select",{value:P.marital,defaultValue:"Single",name:"marital",onChange:L,className:"form-control",children:[(0,C.jsx)("option",{value:"Single",children:"Single"}),(0,C.jsx)("option",{value:"Married",children:"Married"}),(0,C.jsx)("option",{value:"Divorced",children:"Divorced"})]})})]})}),(0,C.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,C.jsxs)("div",{className:"form-group mb-3",children:[(0,C.jsx)("label",{className:"text-black font-w500",children:"Date Of Birth"}),(0,C.jsx)("div",{className:"contact-name",children:(0,C.jsx)("div",{className:"form-group mb-0",children:(0,C.jsx)(y(),{dateFormat:"dd/MM/yyyy",className:"form-control",renderCustomHeader:e=>{let{date:a,changeYear:l,changeMonth:s,decreaseMonth:n,increaseMonth:t,prevMonthButtonDisabled:o,nextMonthButtonDisabled:c}=e;return(0,C.jsxs)("div",{style:{margin:10,display:"flex",justifyContent:"center"},children:[(0,C.jsx)("button",{onClick:n,disabled:o,children:"<"}),(0,C.jsx)("select",{value:a.getFullYear(),onChange:e=>{let{target:{value:a}}=e;return l(a)},children:M.map((e=>(0,C.jsx)("option",{value:e,children:e},e)))}),(0,C.jsx)("select",{value:F[a.getMonth()],onChange:e=>{let{target:{value:a}}=e;return s(F.indexOf(a))},children:F.map((e=>(0,C.jsx)("option",{value:e,children:e},e)))}),(0,C.jsx)("button",{onClick:t,disabled:c,children:">"})]})},placeholder:"D.O.B",name:"dob",selected:P.dob,onChange:e=>{const a=e,l={...P};l.dob=a,A(l)}})})})]})})]}),(0,C.jsxs)("div",{className:"row",children:[(0,C.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,C.jsxs)("div",{className:"form-group mb-3",children:[(0,C.jsx)("label",{className:"text-black font-w500",children:"No. Of Dependants"}),(0,C.jsxs)("div",{className:"contact-name",children:[(0,C.jsx)("input",{type:"number",value:P.depend,className:"form-control",autoComplete:"off",name:"depend",required:"required",onChange:L,placeholder:"No. Of Dependants"}),(0,C.jsx)("span",{className:"validation-text"})]})]})}),(0,C.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,C.jsxs)("div",{className:"form-group mb-3",children:[(0,C.jsx)("label",{className:"text-black font-w500",children:"Email"}),(0,C.jsxs)("div",{className:"contact-name",children:[(0,C.jsx)("input",{type:"text",value:P.email,className:"form-control",autoComplete:"off",name:"email",required:"required",onChange:L,placeholder:"Email"}),(0,C.jsx)("span",{className:"validation-text"})]})]})})]}),(0,C.jsxs)("div",{className:"row",children:[(0,C.jsx)("div",{className:"col-xl-4 col-xxl-4",children:(0,C.jsxs)("div",{className:"form-group mb-3",children:[(0,C.jsx)("label",{className:"text-black font-w500",children:"Country Code"}),(0,C.jsx)("div",{className:"form-group mb-3",children:(0,C.jsx)(b.ZP,{value:""===P.code?"":{value:P.code,label:P.code},onChange:e=>{const a={...P};a.code=e.value,A(a)},styles:e,placeholder:"Search & Select Country Code",classNamePrefix:"form-control",theme:e=>({...e,borderRadius:"0.75rem",width:"100%",fontSize:"0.875rem",fontWeight:400,lineHeight:1.5,color:"#969ba0",backgroundColor:"#fff",display:"block",appearance:"none",backgroundClip:"padding-box",transition:"border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out",colors:{...e.colors,primary:"black"}}),options:O})})]})}),(0,C.jsx)("div",{className:"col-xl-8 col-xxl-8",children:(0,C.jsxs)("div",{className:"form-group mb-3",children:[(0,C.jsx)("label",{className:"text-black font-w500",children:"Phone Number"}),(0,C.jsx)("div",{className:"contact-name",children:(0,C.jsx)("div",{className:"form-group mb-0",children:(0,C.jsx)("input",{type:"number",value:P.number,className:"form-control",autoComplete:"off",name:"number",required:"required",onChange:L,placeholder:"Phone No."})})})]})})]}),(0,C.jsx)("div",{className:"row",children:(0,C.jsx)("div",{className:"col-xl-4 col-xxl-4",children:(0,C.jsx)("h3",{children:"Address"})})}),(0,C.jsxs)("div",{className:"row",children:[(0,C.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,C.jsxs)("div",{className:"form-group mb-3",children:[(0,C.jsx)("label",{className:"text-black font-w500",children:"Country"}),(0,C.jsx)("div",{className:"contact-name",children:(0,C.jsx)("select",{value:P.country,name:"country",onChange:L,defaultValue:"Uganda",className:"form-control",children:I})})]})}),(0,C.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,C.jsxs)("div",{className:"form-group mb-3",children:[(0,C.jsx)("label",{className:"text-black font-w500",children:"City"}),(0,C.jsxs)("div",{className:"contact-name",children:[(0,C.jsx)("input",{type:"text",className:"form-control",value:P.city,autoComplete:"off",name:"city",required:"required",onChange:L,placeholder:"City"}),(0,C.jsx)("span",{className:"validation-text"})]})]})})]}),(0,C.jsxs)("div",{className:"row",children:[(0,C.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,C.jsxs)("div",{className:"form-group mb-3",children:[(0,C.jsx)("label",{className:"text-black font-w500",children:"Town"}),(0,C.jsxs)("div",{className:"contact-name",children:[(0,C.jsx)("input",{type:"text",className:"form-control",autoComplete:"off",name:"town",value:P.town,onChange:L,placeholder:"Town"}),(0,C.jsx)("span",{className:"validation-text"})]})]})}),(0,C.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,C.jsxs)("div",{className:"form-group mb-3",children:[(0,C.jsx)("label",{className:"text-black font-w500",children:"Street Address / Village"}),(0,C.jsxs)("div",{className:"contact-name",children:[(0,C.jsx)("input",{type:"text",className:"form-control",autoComplete:"off",name:"street",value:P.street,onChange:L,placeholder:"Street Address / Village"}),(0,C.jsx)("span",{className:"validation-text"})]})]})})]})]})})]}),(0,C.jsxs)("div",{className:"modal-footer",children:[k?(0,C.jsx)(h.RotateSpinner,{size:30,color:"rgba(41, 106, 176,1)",loading:k}):(0,C.jsxs)("button",{type:"submit",className:"btn btn-primary",onClick:e=>{e.preventDefault();var a=!1,l="";P.actions="";const s=function(e){var a=Date.now()-e,l=new Date(a);return Math.abs(l.getUTCFullYear()-2021)}(P.dob);var n;if(alert(P.dob+" and "+s),""===P.fname?(a=!0,l="Please fill First name"):""===P.lname?(a=!0,l="Please fill Surname name."):""===P.gender?(a=!0,l="Please add gender"):""===P.nid?(a=!0,l="Please add National Identification No. (NIN) / Passport No"):""===P.depend?(a=!0,l="Please add no. of dependants"):""===P.email?(a=!0,l="Please add email"):(n=P.email,String(n).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)?""===P.number?(a=!0,l="Please add phone number"):""===P.city&&(a=!0,l="Please add city of residence"):(a=!0,l="Invalid email address")),a)m()("Oops",l,"error");else{P.id,P.Cust_Id,P.Date_Join,P.Cust_Name,P.Location,P.image;console.log(P),D(!0),(0,x.nO)(P).then((e=>{D(!1),z(!1),m()("Good job!","Successfully Added","success"),E()})).catch((e=>{D(!1),console.log(e),m()("Oops",e.message,"error")}))}},children:[null===P.id?"Add":"Update"," Director"]}),(0,C.jsxs)("button",{type:"button",onClick:()=>z(!1),className:"btn btn-danger",children:[" ",(0,C.jsx)("i",{className:"flaticon-delete-1"})," Discard"]})]})]})})})})]})]})},S=w},25161:(e,a,l)=>{l(72791),l(80184)},18622:(e,a,l)=>{l.d(a,{ZP:()=>c});var s=l(8003),n=l(87462),t=l(72791),o=l(26399),c=(l(5469),l(54164),l(51672),(0,t.forwardRef)((function(e,a){var l=(0,s.u)(e);return t.createElement(o.S,(0,n.Z)({ref:a},l))})))}}]);
//# sourceMappingURL=282.c448893d.chunk.js.map