"use strict";(self.webpackChunkpesasa=self.webpackChunkpesasa||[]).push([[967],{41692:(e,a,s)=>{s.r(a),s.d(a,{FilteringTable:()=>v,default:()=>g});var t=s(72791),l=s(33615),n=s(66659),d=s(71358),c=s(92396),r=s(97311),o=(s(25161),s(62062)),i=s.n(o),m=s(34978),u=s(6639),h=s(2499),x=(s(43241),s(5970)),p=s(59513),b=s.n(p),j=s(80184);const v=()=>{const[e,a]=(0,t.useState)([]),[s,o]=(0,t.useState)([]),[p,v]=(0,t.useState)(!1),[g,N]=(0,t.useState)({id:null,name:"",rate:"",date:new Date});function f(){N({id:null,name:"",rate:"",date:new Date}),D(!0)}function y(){(0,m.pF)().then((e=>{o(e),a(e)})).catch((e=>{console.log(e),i()("Oops",e.message,"error")}))}e.map((e=>{var a;e.ratev=null!==(a=e.rate)&&void 0!==a?a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):0,e.datev=new Date(e.date).toDateString(),e.actions=(0,j.jsx)("div",{className:"d-flex",children:"CLIENT_ADDED"===e.type?null:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("button",{type:"button",className:"btn btn-primary shadow btn-xs sharp me-1",onClick:()=>{return(a=e).actions="",a.date=new Date(a.date),a.name=a.period,console.log(a),void(a.isApproved||(N(a),D(!0)));var a},"data-dismiss":"modal",children:(0,j.jsx)("i",{className:"fa fa-pencil"})}),(0,j.jsx)("button",{onClick:()=>i()({title:"Are you sure?",text:"Once deleted, you will not be able to recover this information!",icon:"warning",buttons:!0,dangerMode:!0}).then((a=>{a?(0,m.tQ)(e.id).then((()=>{i()("Success!  record has been deleted!",{icon:"success"}),y()})).catch((e=>{console.log(e),i()("Oops",e.message,"error")})):i()("Your information is safe!")})),className:"btn btn-danger shadow btn-xs sharp",children:(0,j.jsx)("i",{className:"fa fa-trash"})})]})})})),(0,t.useEffect)((()=>{y()}),[]);x.n.map((e=>(0,j.jsxs)("option",{value:e.dial_code,children:[" "," "+e.name+" ("+e.dial_code+" )"]}))),x.n.map((e=>(0,j.jsxs)("option",{value:e.name,children:[" "," "+e.name+" "]})));const[w,D]=(0,t.useState)(!1),C=(0,t.useMemo)((()=>r.L),[]),S=(0,t.useMemo)((()=>c),[]),M=(0,d.useTable)({columns:C,data:S,initialState:{pageIndex:0}},d.useFilters,d.useGlobalFilter,d.usePagination),[k,A]=(0,t.useState)([]),F=function(e,a){const s=[];for(var t=e;t<a;t++)s.push(t);return s.push(a),s}(2021,(new Date).getFullYear());const R=["January","February","March","April","May","June","July","August","September","October","November","December"],{state:E}=M,{globalFilter:O,pageIndex:U}=E,G=[];return s.map((e=>{G.push((0,j.jsxs)("option",{disabled:e.amOwner,value:e.id,children:[e.name," ",e.amOwner?"(Already Added)":""]}))})),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(n.Z,{activeMenu:"UGX / USD Exchange Rates",motherMenu:"Company Data"}),(0,j.jsxs)("div",{className:"card",children:[(0,j.jsx)("div",{className:"card-header",children:(0,j.jsxs)("div",{className:"row",style:{width:"100%"},children:[(0,j.jsx)("div",{className:"col-xl-3 ",children:(0,j.jsx)("h4",{className:"card-title",children:"UGX / USD  Exchange Rates"})}),(0,j.jsx)("div",{className:"col-xl-3",children:(0,j.jsx)("button",{className:"btn btn-primary font-w600 mb-2 me-auto",onClick:()=>f(),children:"Add New UGX / USD  Rate"})})]})}),(0,j.jsxs)("div",{className:"card-body",children:[(0,j.jsx)("div",{className:"row",style:{width:"100%"},children:(0,j.jsx)("div",{className:"col-xl-3 ",children:(0,j.jsx)("h4",{className:"card-title",children:"Added Rates"})})}),(0,j.jsx)(u.Z,{hideDataExport:!0,rows:e,columns:[{name:"datev",title:"Date"},{name:"ratev",title:"Rate"},{name:"actions",title:"Actions"}],defaultExpandedGroups:[],grouping:[],defaultHiddenColumnNames:[],defaultPageSize:0,hideSelectionExport:!0,infiniteScrolling:!0,fileName:"Ratess"})]}),(0,j.jsx)(l.Z,{className:"fade bd-example-modal-lg",size:"lg",show:w,onHide:D,children:(0,j.jsx)("div",{className:"",role:"document",children:(0,j.jsx)("div",{className:"",children:(0,j.jsxs)("form",{children:[(0,j.jsxs)("div",{className:"modal-header",children:[(0,j.jsx)("h4",{className:"modal-title fs-20",children:"Add UGX / USD  Rate"}),(0,j.jsx)("button",{type:"button",className:"btn-close",onClick:()=>D(!1),"data-dismiss":"modal"})]}),(0,j.jsxs)("div",{className:"modal-body",children:[(0,j.jsx)("i",{className:"flaticon-cancel-12 close"}),(0,j.jsx)("div",{className:"add-contact-box",children:(0,j.jsx)("div",{className:"add-contact-content",children:(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,j.jsxs)("div",{className:"form-group mb-3",children:[(0,j.jsxs)("label",{className:"text-black font-w500",children:[(0,j.jsx)("b",{style:{color:"red"},children:"*"})," Exchange Date"]}),(0,j.jsx)(b(),{dateFormat:"dd/MM/yyyy",className:"form-control",renderCustomHeader:e=>{let{date:a,changeYear:s,changeMonth:t,decreaseMonth:l,increaseMonth:n,prevMonthButtonDisabled:d,nextMonthButtonDisabled:c}=e;return(0,j.jsxs)("div",{style:{margin:10,display:"flex",justifyContent:"center"},children:[(0,j.jsx)("button",{onClick:l,disabled:d,children:"<"}),(0,j.jsx)("select",{value:a.getFullYear(),onChange:e=>{let{target:{value:a}}=e;return s(a)},children:F.map((e=>(0,j.jsx)("option",{value:e,children:e},e)))}),(0,j.jsx)("select",{value:R[a.getMonth()],onChange:e=>{let{target:{value:a}}=e;return t(R.indexOf(a))},children:R.map((e=>(0,j.jsx)("option",{value:e,children:e},e)))}),(0,j.jsx)("button",{onClick:n,disabled:c,children:">"})]})},placeholder:"Disbursement Date",name:"date",selected:g.date,value:g.date,onChange:e=>{const a=e,s={...g};s.date=a,N(s)}})]})}),(0,j.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,j.jsxs)("div",{className:"form-group mb-3",children:[(0,j.jsxs)("label",{className:"text-black font-w500",children:[(0,j.jsx)("b",{style:{color:"red"},children:"*"})," Rate"]}),(0,j.jsxs)("div",{className:"contact-name",children:[(0,j.jsx)("input",{type:"number",className:"form-control",autoComplete:"off",value:g.rate,name:"rate",required:"required",onChange:e=>{e.preventDefault();const a=e.target.getAttribute("name"),s=e.target.value,t={...g};t[a]=s,N(t)},placeholder:" Rate"}),(0,j.jsx)("span",{className:"validation-text"})]})]})})]})})})]}),(0,j.jsxs)("div",{className:"modal-footer",children:[p?(0,j.jsx)(h.RotateSpinner,{size:30,color:"rgba(41, 106, 176,1)",loading:p}):(0,j.jsxs)("button",{type:"submit",className:"btn btn-primary",onClick:e=>{e.preventDefault();var a=!1,s="";g.actions="",""===g.date?(a=!0,s="Please fill period date"):""===g.rate&&(a=!0,s="Please fill in rate"),a?i()("Oops",s,"error"):(console.log(g),g.period=g.name,v(!0),(0,m.X)(g).then((e=>{v(!1),D(!1),i()("Good job!","Successfully Added","success"),y()})).catch((e=>{v(!1),console.log(e),i()("Oops",e.message,"error")})))},children:[null===g.id?"Add":"Update"," Rate"]}),(0,j.jsxs)("button",{type:"button",onClick:()=>D(!1),className:"btn btn-danger",children:[" ",(0,j.jsx)("i",{className:"flaticon-delete-1"})," Close"]})]})]})})})})]})]})},g=v},25161:(e,a,s)=>{s(72791),s(80184)}}]);
//# sourceMappingURL=967.24cf45c4.chunk.js.map