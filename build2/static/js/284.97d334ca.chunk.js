"use strict";(self.webpackChunkpesasa=self.webpackChunkpesasa||[]).push([[284],{27400:(e,a,l)=>{l.r(a),l.d(a,{FilteringTable:()=>f,default:()=>v});var s=l(72791),n=l(91523),t=l(33615),c=l(66659),o=l(71358),i=l(92396),r=l(97311),d=(l(25161),l(62062)),m=l.n(d),x=l(34978),u=l(6639),h=(l(43241),l(5970)),j=l(59513),p=l.n(j),N=l(80184);const f=()=>{const[e,a]=(0,s.useState)([]),[l,d]=(0,s.useState)([{accountStatus:"ACTIVE",lastLogin:"14th Aug, 2023 8:31 PM",priv:"Admin (Full)",role:"CTO",email:"Kayemba.j@kamrocapital.com",lname:"Jonathan",fname:"Kayemba",addedBy:"Jonathan Kayemba",createdAt:"2021-08-13"},{accountStatus:"ACTIVE",lastLogin:"14th Aug, 2023 12:08 PM",priv:"Admin (Limited)",role:"Software Developer",email:"support@pesasa.net",lname:"Mark",fname:"Kugonza",addedBy:"Jonathan Kayemba",createdAt:"2021-09-13"},{accountStatus:"ACTIVE",lastLogin:"12th Aug, 2023 10:15 AM",priv:"Back Office (Full)",role:"CEO",email:"Kamanyi.r@kamrocapital.com",lname:"Robert",fname:"Kamanyi",addedBy:"Jonathan Kayemba",createdAt:"2021-12-07"},{accountStatus:"ACTIVE",lastLogin:"12th Aug, 2023 10:45 AM",priv:"Back Office (Full)",role:"COO",email:"waswa.s@kamrocapital.com",lname:"C-Section",fname:"(Approvers)",addedBy:"Jonathan Kayemba",createdAt:"2021-12-07"},{accountStatus:"ACTIVE",lastLogin:"14th Aug, 2023 05:09 PM",priv:"Back Office (Limited)",role:"ABSA",email:"info@kamrocapital.com ",lname:"Patience",fname:"Adong",addedBy:"Jonathan Kayemba",createdAt:"2022-01-18"}]),[j,f]=(0,s.useState)({id:null,fname:"",lname:"",oname:"",gender:"",nationality:"Ugandan",nid:"",marital:"Single",image:"",depend:"",email:"",number:"",town:"",street:"",code:"+256",country:"Uganda",password:"changemenow",city:"",accountStatus:"ACTIVE",dob:new Date});function v(){(0,x.f6)().then((e=>{a(e)})).catch((e=>{console.log(e),m()("Oops",e.message,"error")}))}e.map(((e,a)=>{e.acc=(0,N.jsx)("div",{children:(0,N.jsxs)("div",{children:[(0,N.jsx)("b",{children:"Status:"})," ",e.accountStatus]})}),e.user=(0,N.jsxs)("div",{children:[(0,N.jsxs)("div",{children:[(0,N.jsx)("b",{children:"Name:"})," ",e.lname+" "+e.fname]}),(0,N.jsx)("div",{children:e.email})]}),e.name=e.lname+" "+e.fname,e.dateAdd=(0,N.jsxs)("div",{children:[(0,N.jsxs)("div",{children:[(0,N.jsx)("b",{children:"Created At: "})," ",e.dateAdded.split("T")[0]]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("b",{children:"Added By: "})," ",e.addedBy]})]}),e.actions=(0,N.jsxs)("div",{className:"d-flex",children:[(0,N.jsx)("button",{type:"button",className:"btn btn-primary shadow btn-xs sharp me-1",onClick:()=>{return(a=e).dob=new Date(a.dob),console.log(a),f(a),void S(!0);var a},"data-dismiss":"modal",children:(0,N.jsx)("i",{className:"fa fa-pencil"})}),(0,N.jsx)("button",{onClick:()=>m()({title:"Are you sure?",text:"Once deleted, you will not be able to recover this information!",icon:"warning",buttons:!0,dangerMode:!0}).then((a=>{a?(0,x._K)(e.id).then((e=>{m()("Poof! Director record has been deleted!",{icon:"success"}),v()})).catch((e=>{console.log(e),m()("Oops",e.message,"error")})):m()("Your information is safe!")})),className:"btn btn-danger shadow btn-xs sharp",children:(0,N.jsx)("i",{className:"fa fa-trash"})}),(0,N.jsx)("button",{style:{marginLeft:"5px"},onClick:()=>m()({title:"Resetting Password",text:"Once pasword is reset, you will not be able to recover the old password!",icon:"warning",buttons:!0,dangerMode:!0}).then((a=>{a?(0,x.zX)(e.id).then((e=>{m()("Password has been reset!",{icon:"success"}),v()})).catch((e=>{console.log(e),m()("Oops",e.message,"error")})):m()("Pasword not changed!")})),className:"btn btn-info shadow btn-xs sharp",children:(0,N.jsx)("i",{className:"fa fa-refresh"})})]})})),(0,s.useEffect)((()=>{v()}),[]);const b=function(e,a){const l=[];for(var s=e;s<a;s++)l.push(s);return l.push(a),l}(1920,(new Date).getFullYear()),g=["January","February","March","April","May","June","July","August","September","October","November","December"],y=h.n.map((e=>(0,N.jsxs)("option",{value:e.dial_code,children:[" "," "+e.name+" ("+e.dial_code+" )"]}))),C=h.n.map((e=>(0,N.jsxs)("option",{value:e.name,children:[" "," "+e.name+" "]}))),w=h.E.map((e=>(0,N.jsx)("option",{value:e,children:e}))),[A,S]=(0,s.useState)(!1),k=(0,s.useMemo)((()=>r.L),[]),P=(0,s.useMemo)((()=>i),[]),M=(0,o.useTable)({columns:k,data:P,initialState:{pageIndex:0}},o.useFilters,o.useGlobalFilter,o.usePagination),[D,O]=(0,s.useState)([]);const I=e=>{e.preventDefault();const a=e.target.getAttribute("name"),l=e.target.value,s={...j};s[a]=l,f(s)},{getTableProps:q,getTableBodyProps:T,headerGroups:E,prepareRow:F,state:V,page:B,gotoPage:K,pageCount:L,pageOptions:U,nextPage:J,previousPage:z,canNextPage:G,canPreviousPage:_,setGlobalFilter:Y}=M,{globalFilter:Z,pageIndex:H}=V;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(c.Z,{activeMenu:"Staff",motherMenu:"System Users"}),(0,N.jsxs)("div",{className:"card",children:[(0,N.jsx)("div",{className:"card-header",children:(0,N.jsxs)("div",{className:"row",children:[(0,N.jsx)("div",{className:"col-xl-3 col-xxl-6",children:(0,N.jsx)("h4",{className:"card-title",children:"Staff"})}),(0,N.jsx)("div",{className:"col-xl-4 col-xxl-6",children:(0,N.jsx)(n.rU,{className:"btn btn-primary font-w600 mb-2 me-auto",onClick:()=>(f({id:null,fname:"",lname:"",oname:"",gender:"",nationality:"Ugandan",nid:"",marital:"Single",image:"",depend:"",email:"",number:"",town:"",street:"",code:"+256",country:"Uganda",password:"changemenow",city:"",accountStatus:"ACTIVE",dob:new Date}),void S(!0)),children:"+ Add Staff"})})]})}),(0,N.jsx)("div",{className:"card-body",children:(0,N.jsx)(u.Z,{hideDataExport:!0,rows:e,columns:[{name:"user",title:"User"},{name:"dateAdd",title:"Addition"},{name:"acc",title:"Accessibility"},{name:"actions",title:"Actions"}],defaultExpandedGroups:[],grouping:[],defaultHiddenColumnNames:["actions"],defaultPageSize:0,hideSelectionExport:!0,infiniteScrolling:!0,fileName:"Directors"})}),(0,N.jsx)(t.Z,{className:"fade bd-example-modal-lg",size:"lg",show:A,onHide:S,children:(0,N.jsx)("div",{className:"",role:"document",children:(0,N.jsx)("div",{className:"",children:(0,N.jsxs)("form",{children:[(0,N.jsxs)("div",{className:"modal-header",children:[(0,N.jsx)("h4",{className:"modal-title fs-20",children:"Add Director"}),(0,N.jsx)("button",{type:"button",className:"btn-close",onClick:()=>S(!1),"data-dismiss":"modal"})]}),(0,N.jsxs)("div",{className:"modal-body",children:[(0,N.jsx)("i",{className:"flaticon-cancel-12 close"}),(0,N.jsx)("div",{className:"add-contact-box",children:(0,N.jsxs)("div",{className:"add-contact-content",children:[(0,N.jsxs)("div",{className:"row",children:[(0,N.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,N.jsxs)("div",{className:"form-group mb-3",children:[(0,N.jsx)("label",{className:"text-black font-w500",children:"First Name"}),(0,N.jsxs)("div",{className:"contact-name",children:[(0,N.jsx)("input",{type:"text",className:"form-control",autoComplete:"off",value:j.fname,name:"fname",required:"required",onChange:I,placeholder:"First Name"}),(0,N.jsx)("span",{className:"validation-text"})]})]})}),(0,N.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,N.jsxs)("div",{className:"form-group mb-3",children:[(0,N.jsx)("label",{className:"text-black font-w500",children:"Surname"}),(0,N.jsxs)("div",{className:"contact-name",children:[(0,N.jsx)("input",{type:"text",value:j.lname,className:"form-control",autoComplete:"off",name:"lname",required:"required",onChange:I,placeholder:"Surname"}),(0,N.jsx)("span",{className:"validation-text"})]})]})})]}),(0,N.jsxs)("div",{className:"row",children:[(0,N.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,N.jsxs)("div",{className:"form-group mb-3",children:[(0,N.jsx)("label",{className:"text-black font-w500",children:"Other Name"}),(0,N.jsxs)("div",{className:"contact-name",children:[(0,N.jsx)("input",{type:"text",value:j.oname,className:"form-control",autoComplete:"off",name:"oname",required:"required",onChange:I,placeholder:"Other Name"}),(0,N.jsx)("span",{className:"validation-text"})]})]})}),(0,N.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,N.jsxs)("div",{className:"form-group mb-3",children:[(0,N.jsx)("label",{className:"text-black font-w500",children:"Gender"}),(0,N.jsx)("div",{className:"contact-name",children:(0,N.jsxs)("div",{className:"form-group mb-0",children:[(0,N.jsxs)("label",{className:"radio-inline me-3",children:[(0,N.jsx)("input",{required:"required",checked:"male"===j.gender,value:"male",onChange:I,type:"radio",name:"gender"})," Male"]}),(0,N.jsxs)("label",{className:"radio-inline me-3",children:[(0,N.jsx)("input",{required:"required",checked:"female"===j.gender,value:"female",onChange:I,type:"radio",name:"gender"})," Female"]})]})})]})})]}),(0,N.jsxs)("div",{className:"row",children:[(0,N.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,N.jsxs)("div",{className:"form-group mb-3",children:[(0,N.jsx)("label",{className:"text-black font-w500",children:"Nationality"}),(0,N.jsx)("div",{className:"form-group mb-3",children:(0,N.jsx)("select",{value:j.nationality,name:"nationality",onChange:I,defaultValue:"Ugandan",className:"form-control",id:"sel1",children:w})})]})}),(0,N.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,N.jsxs)("div",{className:"form-group mb-3",children:[(0,N.jsx)("label",{className:"text-black font-w500",children:"National Identification No. (NIN) / Passport No"}),(0,N.jsx)("div",{className:"contact-name",children:(0,N.jsx)("div",{className:"form-group mb-0",children:(0,N.jsx)("input",{value:j.nid,type:"text",className:"form-control",autoComplete:"off",name:"nid",required:"required",onChange:I,placeholder:"ID No."})})})]})})]}),(0,N.jsxs)("div",{className:"row",children:[(0,N.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,N.jsxs)("div",{className:"form-group mb-3",children:[(0,N.jsx)("label",{className:"text-black font-w500",children:"Marital Status"}),(0,N.jsx)("div",{className:"form-group mb-3",children:(0,N.jsxs)("select",{value:j.marital,defaultValue:"Single",name:"marital",onChange:I,className:"form-control",children:[(0,N.jsx)("option",{value:"Single",children:"Single"}),(0,N.jsx)("option",{value:"Married",children:"Married"}),(0,N.jsx)("option",{value:"Divorced",children:"Divorced"})]})})]})}),(0,N.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,N.jsxs)("div",{className:"form-group mb-3",children:[(0,N.jsx)("label",{className:"text-black font-w500",children:"Date Of Birth"}),(0,N.jsx)("div",{className:"contact-name",children:(0,N.jsx)("div",{className:"form-group mb-0",children:(0,N.jsx)(p(),{dateFormat:"dd/MM/yyyy",className:"form-control",renderCustomHeader:e=>{let{date:a,changeYear:l,changeMonth:s,decreaseMonth:n,increaseMonth:t,prevMonthButtonDisabled:c,nextMonthButtonDisabled:o}=e;return(0,N.jsxs)("div",{style:{margin:10,display:"flex",justifyContent:"center"},children:[(0,N.jsx)("button",{onClick:n,disabled:c,children:"<"}),(0,N.jsx)("select",{value:a.getFullYear(),onChange:e=>{let{target:{value:a}}=e;return l(a)},children:b.map((e=>(0,N.jsx)("option",{value:e,children:e},e)))}),(0,N.jsx)("select",{value:g[a.getMonth()],onChange:e=>{let{target:{value:a}}=e;return s(g.indexOf(a))},children:g.map((e=>(0,N.jsx)("option",{value:e,children:e},e)))}),(0,N.jsx)("button",{onClick:t,disabled:o,children:">"})]})},placeholder:"D.O.B",name:"dob",selected:j.dob,onChange:e=>{const a=e,l={...j};l.dob=a,f(l)}})})})]})})]}),(0,N.jsxs)("div",{className:"row",children:[(0,N.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,N.jsxs)("div",{className:"form-group mb-3",children:[(0,N.jsx)("label",{className:"text-black font-w500",children:"No. Of Dependants"}),(0,N.jsxs)("div",{className:"contact-name",children:[(0,N.jsx)("input",{type:"number",value:j.depend,className:"form-control",autoComplete:"off",name:"depend",required:"required",onChange:I,placeholder:"No. Of Dependants"}),(0,N.jsx)("span",{className:"validation-text"})]})]})}),(0,N.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,N.jsxs)("div",{className:"form-group mb-3",children:[(0,N.jsx)("label",{className:"text-black font-w500",children:"Email"}),(0,N.jsxs)("div",{className:"contact-name",children:[(0,N.jsx)("input",{type:"text",value:j.email,className:"form-control",autoComplete:"off",name:"email",required:"required",onChange:I,placeholder:"Email"}),(0,N.jsx)("span",{className:"validation-text"})]})]})})]}),(0,N.jsxs)("div",{className:"row",children:[(0,N.jsx)("div",{className:"col-xl-4 col-xxl-4",children:(0,N.jsxs)("div",{className:"form-group mb-3",children:[(0,N.jsx)("label",{className:"text-black font-w500",children:"Country Code"}),(0,N.jsx)("div",{className:"form-group mb-3",children:(0,N.jsx)("select",{value:j.code,name:"code",onChange:I,defaultValue:"+256",className:"form-control",children:y})})]})}),(0,N.jsx)("div",{className:"col-xl-8 col-xxl-8",children:(0,N.jsxs)("div",{className:"form-group mb-3",children:[(0,N.jsx)("label",{className:"text-black font-w500",children:"Phone Number"}),(0,N.jsx)("div",{className:"contact-name",children:(0,N.jsx)("div",{className:"form-group mb-0",children:(0,N.jsx)("input",{type:"number",value:j.number,className:"form-control",autoComplete:"off",name:"number",required:"required",onChange:I,placeholder:"Phone No."})})})]})})]}),(0,N.jsx)("div",{className:"row",children:(0,N.jsx)("div",{className:"col-xl-4 col-xxl-4",children:(0,N.jsx)("h3",{children:"Address"})})}),(0,N.jsxs)("div",{className:"row",children:[(0,N.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,N.jsxs)("div",{className:"form-group mb-3",children:[(0,N.jsx)("label",{className:"text-black font-w500",children:"Country"}),(0,N.jsx)("div",{className:"contact-name",children:(0,N.jsx)("select",{value:j.country,name:"country",onChange:I,defaultValue:"Uganda",className:"form-control",children:C})})]})}),(0,N.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,N.jsxs)("div",{className:"form-group mb-3",children:[(0,N.jsx)("label",{className:"text-black font-w500",children:"City"}),(0,N.jsxs)("div",{className:"contact-name",children:[(0,N.jsx)("input",{type:"text",className:"form-control",value:j.city,autoComplete:"off",name:"city",required:"required",onChange:I,placeholder:"City"}),(0,N.jsx)("span",{className:"validation-text"})]})]})})]}),(0,N.jsxs)("div",{className:"row",children:[(0,N.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,N.jsxs)("div",{className:"form-group mb-3",children:[(0,N.jsx)("label",{className:"text-black font-w500",children:"Town"}),(0,N.jsxs)("div",{className:"contact-name",children:[(0,N.jsx)("input",{type:"text",className:"form-control",autoComplete:"off",name:"town",value:j.town,onChange:I,placeholder:"Town"}),(0,N.jsx)("span",{className:"validation-text"})]})]})}),(0,N.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,N.jsxs)("div",{className:"form-group mb-3",children:[(0,N.jsx)("label",{className:"text-black font-w500",children:"Street Address / Village"}),(0,N.jsxs)("div",{className:"contact-name",children:[(0,N.jsx)("input",{type:"text",className:"form-control",autoComplete:"off",name:"street",value:j.street,onChange:I,placeholder:"Street Address / Village"}),(0,N.jsx)("span",{className:"validation-text"})]})]})})]}),(0,N.jsx)("div",{className:"row",children:(0,N.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,N.jsxs)("div",{className:"form-group mb-3",children:[(0,N.jsx)("label",{className:"text-black font-w500",children:"Account Status"}),(0,N.jsx)("div",{className:"form-group mb-3",children:(0,N.jsxs)("select",{defaultValue:"ACTIVE",name:"accountStatus",value:j.accountStatus,onChange:I,className:"form-control",children:[(0,N.jsx)("option",{value:"ACTIVE",children:"Active"}),(0,N.jsx)("option",{value:"INACTIVE",children:"Inactive"})]})})]})})})]})})]}),(0,N.jsxs)("div",{className:"modal-footer",children:[(0,N.jsxs)("button",{type:"submit",className:"btn btn-primary",onClick:e=>{e.preventDefault();var a=!1,l="";j.actions="";!function(e){var a=Date.now()-e,l=new Date(a);Math.abs(l.getUTCFullYear()-2021)}(j.dob);var s;if(""===j.fname?(a=!0,l="Please fill First name"):""===j.lname?(a=!0,l="Please fill Surname name."):""===j.gender?(a=!0,l="Please add gender"):""===j.nid?(a=!0,l="Please add National Identification No. (NIN) / Passport No"):""===j.depend?(a=!0,l="Please add no. of dependants"):""===j.email?(a=!0,l="Please add email"):(s=j.email,String(s).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)?""===j.number?(a=!0,l="Please add phone number"):""===j.city&&(a=!0,l="Please add city of residence"):(a=!0,l="Invalid email address")),a)m()("Oops",l,"error");else{j.id,j.Cust_Id,j.Date_Join,j.Cust_Name,j.Location,j.image;console.log(j),(0,x.Ki)(j).then((e=>{S(!1),m()("Good job!","Successfully Added","success"),v()})).catch((e=>{console.log(e),m()("Oops",e.message,"error")}))}},children:[null===j.id?"Add":"Update"," Director"]}),(0,N.jsxs)("button",{type:"button",onClick:()=>S(!1),className:"btn btn-danger",children:[" ",(0,N.jsx)("i",{className:"flaticon-delete-1"})," Discard"]})]})]})})})})]})]})},v=f},25161:(e,a,l)=>{l(72791),l(80184)}}]);
//# sourceMappingURL=284.97d334ca.chunk.js.map