"use strict";(self.webpackChunkpesasa=self.webpackChunkpesasa||[]).push([[232],{25161:(e,t,n)=>{n(72791),n(80184)},28850:(e,t,n)=>{n.r(t),n.d(t,{FilteringTable:()=>y,default:()=>v});var s=n(72791),o=n(66659),a=n(71358),i=n(92396),r=n(97311),c=(n(25161),n(62062)),l=n.n(c),d=n(34978),u=n(6639),m=n(2499),h=n(65661),p=n(5289),f=n(39157),x=n(97123),b=n(18622),g=(n(43241),n(5970)),j=n(80184);const y=()=>{const[e,t]=(0,s.useState)([]),[n,c]=(0,s.useState)([]),[y,v]=(0,s.useState)([]),[w,S]=(0,s.useState)([]),[N,C]=(0,s.useState)(""),[O,Z]=(0,s.useState)(null),[k,D]=(0,s.useState)([]),[P,E]=(0,s.useState)(!1),[R,I]=(0,s.useState)(!1),[F,T]=(0,s.useState)({id:null,name:"",sector:"",osector:"",country:"Uganda",city:"",town:"",streetaddress:"",contactPersonOne:"",phoneOne:"",designationOne:"",contactEmailOne:"",contactPersonTwo:"",phoneTwo:"",designationTwo:"",contactEmailTwo:"",clientBuyerId:null,terms:"choose",code:"+256",code2:"+256"});function W(){(0,d.iI)().then((e=>{v(e)})).catch((e=>{console.log(e),l()("Oops",e.message,"error")}))}function A(){(0,d.dd)().then((e=>{const t=[];e.map((e=>t.push({value:e.id,label:e.name}))),S(t)})).catch((e=>{console.log(e),l()("Oops",e.message,"error")}))}e.map(((t,n)=>{t.add=t.city+" , "+t.country,t.actions=(0,j.jsx)("div",{className:"d-flex",children:parseInt(n)===parseInt(e.length-1)?(0,j.jsx)("button",{onClick:()=>{E(!0),D(y),C(t.name)},className:"btn btn-info shadow btn-xs ",children:"View Districts"}):(0,j.jsxs)(j.Fragment,{children:[t.districts.length>0?(0,j.jsx)("button",{onClick:()=>{E(!0),D(t.districts),C(t.name)},className:"btn btn-info shadow btn-xs ",children:"Districts"}):null,(0,j.jsx)("button",{type:"button",style:{marginLeft:t.districts.length>0?"10px":0},className:"btn btn-primary shadow btn-xs ",onClick:()=>{return Z((e=t).id),C(e.name),void G(!0);var e},"data-dismiss":"modal",children:"Add Districts"})]})})})),(0,s.useEffect)((()=>{A(),(0,d.JL)().then((e=>{e.push({name:"Ungrouped Districts",districts:[]}),c(e),t(e)})).catch((e=>{console.log(e),l()("Oops",e.message,"error")})),W(),A()}),[]);g.n.map((e=>(0,j.jsxs)("option",{value:e.dial_code,children:[" "," "+e.name+" ("+e.dial_code+" )"]}))),g.n.map((e=>(0,j.jsxs)("option",{value:e.name,children:[" "," "+e.name+" "]})));const[_,G]=(0,s.useState)(!1),[M,z]=(0,s.useState)([]),B=(0,s.useMemo)((()=>r.L),[]),H=(0,s.useMemo)((()=>i),[]),L=(0,a.useTable)({columns:B,data:H,initialState:{pageIndex:0}},a.useFilters,a.useGlobalFilter,a.usePagination),[U,J]=(0,s.useState)([]),{state:V}=L,{globalFilter:q,pageIndex:K}=V,Q=[];return n.map((e=>{Q.push((0,j.jsxs)("option",{disabled:e.amOwner,value:e.id,children:[e.name," ",e.amOwner?"(Already Added)":""]}))})),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(p.Z,{disableEnforceFocus:!0,fullWidth:!0,maxWidth:"md",open:P,onClose:E,children:[(0,j.jsx)(h.Z,{children:(0,j.jsxs)("h4",{children:["Districts in ",N]})}),(0,j.jsx)(f.Z,{children:(0,j.jsx)(u.Z,{rows:k,columns:[{name:"name",title:"District Name"}],exportColumns:[{name:"name",title:"Name"}],exportRow:k,defaultExpandedGroups:[],grouping:[],defaultHiddenColumnNames:[],defaultPageSize:0,selection:[],changeSelection:!0,passSelection:function(e){this.setState({selection:e},(()=>{}))},infiniteScrolling:!0,fileName:"Districts",defaultColumnWidths:[],defaultOrder:[],totalSummaryItems:[],groupSummaryItems:[],showColumnsWhenGrouped:!0})}),(0,j.jsx)(x.Z,{style:{width:"100%",overflow:"hidden"},children:(0,j.jsx)("button",{type:"button",className:"btn shadow btn-xs btn-primary",onClick:()=>E(!1),"data-dismiss":"modal",children:"Close"})})]}),(0,j.jsx)(o.Z,{activeMenu:"Regions",motherMenu:"Company Data"}),(0,j.jsxs)("div",{className:"card",children:[(0,j.jsx)("div",{className:"card-header",children:(0,j.jsx)("div",{className:"row",style:{width:"100%"},children:(0,j.jsx)("div",{className:"col-xl-3 ",children:(0,j.jsx)("h4",{className:"card-title",children:"Regions"})})})}),(0,j.jsx)("div",{className:"card-body",children:(0,j.jsx)(u.Z,{hideDataExport:!0,rows:e,columns:[{name:"name",title:"Name"},{name:"actions",title:"Actions"}],defaultExpandedGroups:[],grouping:[],defaultHiddenColumnNames:[],defaultPageSize:0,hideSelectionExport:!0,infiniteScrolling:!0,fileName:"Banks"})}),(0,j.jsxs)(p.Z,{disableEnforceFocus:!0,fullWidth:!0,maxWidth:"lg",open:_,onClose:G,children:[(0,j.jsx)(h.Z,{children:(0,j.jsxs)("h4",{className:"modal-title fs-20",children:["Add Districts to ",N]})}),(0,j.jsxs)(f.Z,{style:{height:400},children:[(0,j.jsx)("i",{className:"flaticon-cancel-12 close"}),(0,j.jsx)("div",{className:"add-contact-box",children:(0,j.jsx)("div",{className:"add-contact-content",children:(0,j.jsx)("div",{className:"row",children:(0,j.jsx)("div",{className:"col-xl-12 col-xxl-12",children:(0,j.jsxs)("div",{className:"form-group mb-3",children:[(0,j.jsx)("label",{children:"Select Districts"}),(0,j.jsx)(b.ZP,{isMulti:!0,value:M,onChange:e=>{z(e)},styles:{input:e=>({...e,"padding-top":"12px","padding-bottom":"12px"}),placeholder:e=>({...e,color:"#00aff0"}),control:e=>({...e,border:"black solid 1px !important"})},placeholder:"Search & Select District",classNamePrefix:"form-control",theme:e=>({...e,borderRadius:"0.75rem",width:"100%",fontSize:"0.875rem",fontWeight:400,lineHeight:1.5,color:"#969ba0",backgroundColor:"#fff",display:"block",appearance:"none",backgroundClip:"padding-box",transition:"border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out",colors:{...e.colors,primary:"black"}}),options:w})]})})})})})]}),(0,j.jsxs)(x.Z,{style:{width:"100%",overflow:"hidden"},children:[R?(0,j.jsx)(m.RotateSpinner,{size:30,color:"rgba(41, 106, 176,1)",loading:R}):(0,j.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:e=>{e.preventDefault();const n=[];M.map((e=>{n.push(e.value)}));console.log(F),I(!0),(0,d.dc)({id:O,districtIds:n}).then((e=>{I(!1),G(!1),l()("Good job!","Successfully Added","success"),e.push({name:"Ungrouped Districts",districts:[]}),c(e),t(e),W()})).catch((e=>{I(!1),console.log(e),l()("Oops",e.message,"error")}))},children:" Save"}),(0,j.jsxs)("button",{type:"button",onClick:()=>G(!1),className:"btn btn-danger",children:[" ",(0,j.jsx)("i",{className:"flaticon-delete-1"})," Discard"]})]})]})]})]})},v=y},18622:(e,t,n)=>{n.d(t,{ZP:()=>r});var s=n(8003),o=n(87462),a=n(72791),i=n(26399),r=(n(5469),n(54164),n(51672),(0,a.forwardRef)((function(e,t){var n=(0,s.u)(e);return a.createElement(i.S,(0,o.Z)({ref:t},n))})))},98557:(e,t,n)=>{function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}n.d(t,{Z:()=>i});var o=n(71002),a=n(97326);function i(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=s(e);if(t){var r=s(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===(0,o.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,a.Z)(e)}(this,n)}}},60136:(e,t,n)=>{n.d(t,{Z:()=>o});var s=n(89611);function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,s.Z)(e,t)}}}]);
//# sourceMappingURL=232.1bf6442f.chunk.js.map