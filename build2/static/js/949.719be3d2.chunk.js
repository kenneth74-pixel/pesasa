"use strict";(self.webpackChunkpesasa=self.webpackChunkpesasa||[]).push([[949],{25161:(e,a,s)=>{s(72791),s(80184)},54049:(e,a,s)=>{s.r(a),s.d(a,{FilteringTable:()=>j,default:()=>f});var l=s(72791),n=s(33615),t=s(66659),i=s(71358),d=s(92396),o=s(97311),c=(s(25161),s(62062)),r=s.n(c),m=s(34978),u=s(6639),h=s(2499),x=(s(51175),s(10178),s(52581)),p=(s(43241),s(5970)),b=s(80184);const j=()=>{const[e,a]=(0,l.useState)([]),[s,c]=(0,l.useState)([]),[j,f]=(0,l.useState)(!1),[N,v]=(0,l.useState)({id:null,name:"",required:!0,fileId:null});function g(){v({id:null,name:"",required:!0,fileId:null}),F(!0)}function w(){(0,m.Ee)().then((e=>{c(e),a(e)})).catch((e=>{console.log(e),r()("Oops",e.message,"error")}))}e.map((e=>{e.file=null!==e.fileId?(0,b.jsx)("div",{className:"d-flex",children:(0,b.jsx)("a",{target:"_blank",href:e.path,children:(0,b.jsx)("button",{type:"button",className:"btn btn-success shadow btn-xs ","data-dismiss":"modal",children:"view documnet"})})}):"None Attached",e.actions=(0,b.jsx)("div",{className:"d-flex",children:"CLIENT_ADDED"===e.type?null:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{type:"button",className:"btn btn-primary shadow btn-xs sharp me-1",onClick:()=>{return(a=e).actions="",console.log(a),void(a.isApproved||(v(a),F(!0)));var a},"data-dismiss":"modal",children:(0,b.jsx)("i",{className:"fa fa-pencil"})}),(0,b.jsx)("button",{onClick:()=>r()({title:"Are you sure?",text:"Once deleted, you will not be able to recover this information!",icon:"warning",buttons:!0,dangerMode:!0}).then((a=>{a?(0,m.mw)(e.id).then((()=>{r()("Poof!  record has been deleted!",{icon:"success"}),w()})).catch((e=>{console.log(e),r()("Oops",e.message,"error")})):r()("Your information is safe!")})),className:"btn btn-danger shadow btn-xs sharp",children:(0,b.jsx)("i",{className:"fa fa-trash"})})]})})})),(0,l.useEffect)((()=>{w()}),[]);p.n.map((e=>(0,b.jsxs)("option",{value:e.dial_code,children:[" "," "+e.name+" ("+e.dial_code+" )"]}))),p.n.map((e=>(0,b.jsxs)("option",{value:e.name,children:[" "," "+e.name+" "]})));const[y,F]=(0,l.useState)(!1),A=(0,l.useMemo)((()=>o.L),[]),S=(0,l.useMemo)((()=>d),[]),k=(0,i.useTable)({columns:A,data:S,initialState:{pageIndex:0}},i.useFilters,i.useGlobalFilter,i.usePagination),[q,C]=(0,l.useState)([]),{state:D}=k,{globalFilter:I,pageIndex:R}=D,O=[];return s.map((e=>{O.push((0,b.jsxs)("option",{disabled:e.amOwner,value:e.id,children:[e.name," ",e.amOwner?"(Already Added)":""]}))})),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(t.Z,{activeMenu:"Required File",motherMenu:"Company Data"}),(0,b.jsxs)("div",{className:"card",children:[(0,b.jsx)("div",{className:"card-header",children:(0,b.jsxs)("div",{className:"row",style:{width:"100%"},children:[(0,b.jsx)("div",{className:"col-xl-3 ",children:(0,b.jsx)("h4",{className:"card-title",children:"Required Files"})}),(0,b.jsx)("div",{className:"col-xl-3",children:(0,b.jsx)("button",{className:"btn btn-primary font-w600 mb-2 me-auto",onClick:()=>g(),children:"Add New Required File"})})]})}),(0,b.jsxs)("div",{className:"card-body",children:[(0,b.jsx)("div",{className:"row",style:{width:"100%"},children:(0,b.jsx)("div",{className:"col-xl-3 ",children:(0,b.jsx)("h4",{className:"card-title",children:"Added Required Files"})})}),(0,b.jsx)(u.Z,{hideDataExport:!0,rows:e,columns:[{name:"name",title:"Name"},{name:"file",title:"Template"},{name:"actions",title:"Actions"}],defaultExpandedGroups:[],grouping:[],defaultHiddenColumnNames:[],defaultPageSize:0,hideSelectionExport:!0,infiniteScrolling:!0,fileName:"Required Files"})]}),(0,b.jsx)(n.Z,{className:"fade bd-example-modal-lg",size:"lg",show:y,onHide:F,children:(0,b.jsx)("div",{className:"",role:"document",children:(0,b.jsx)("div",{className:"",children:(0,b.jsxs)("form",{children:[(0,b.jsxs)("div",{className:"modal-header",children:[(0,b.jsx)("h4",{className:"modal-title fs-20",children:"Add Required File"}),(0,b.jsx)("button",{type:"button",className:"btn-close",onClick:()=>F(!1),"data-dismiss":"modal"})]}),(0,b.jsxs)("div",{className:"modal-body",children:[(0,b.jsx)("i",{className:"flaticon-cancel-12 close"}),(0,b.jsx)("div",{className:"add-contact-box",children:(0,b.jsx)("div",{className:"add-contact-content",children:(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,b.jsxs)("div",{className:"form-group mb-3",children:[(0,b.jsxs)("label",{className:"text-black font-w500",children:[(0,b.jsx)("b",{style:{color:"red"},children:"*"})," Name"]}),(0,b.jsxs)("div",{className:"contact-name",children:[(0,b.jsx)("input",{type:"text",className:"form-control",autoComplete:"off",value:N.name,name:"name",required:"required",onChange:e=>{e.preventDefault();const a=e.target.getAttribute("name"),s=e.target.value,l={...N};l[a]=s,v(l)},placeholder:" Name"}),(0,b.jsx)("span",{className:"validation-text"})]})]})}),(0,b.jsxs)("div",{className:"col-xl-6 col-xxl-6",children:[null!==N.fileId?(0,b.jsx)("b",{children:"Template already attached, if another is added will replace old one"}):(0,b.jsx)("b",{children:"Attach Template (optional)"}),(0,b.jsx)(x.Q9,{acceptedFileTypes:["application/pdf"],allowMultiple:!1,maxFileSize:"2MB",labelIdle:'Drag & Drop  Template Here or <span class="filepond--label-action">Browse</span>.',server:{process:(e,a,s,l,n,t,i,d,o)=>{const c=new FormData;return c.append("file",a),c.append("name",e),c.append("type",6),(0,m.IL)(c).then((e=>{const a=e.id;console.log("one"),console.log(a);const s={...N};s.fileId=a,console.log("checkmate"),console.log(s),v(s),l(e.id)})).catch((e=>{alert(e),alert(JSON.stringify(e))})),{abort:()=>{request.abort(),i()}}},revert:(e,a,s)=>{const l={...N};l.fileId=null,v(l),a()}}})]})]})})})]}),(0,b.jsxs)("div",{className:"modal-footer",children:[j?(0,b.jsx)(h.RotateSpinner,{size:30,color:"rgba(41, 106, 176,1)",loading:j}):(0,b.jsxs)("button",{type:"submit",className:"btn btn-primary",onClick:e=>{e.preventDefault();var a=!1,s="";N.actions="",N.file="",""===N.name&&(a=!0,s="Please fill Required File name"),a?r()("Oops",s,"error"):(console.log(N),f(!0),(0,m.rF)(N).then((e=>{f(!1),F(!1),r()("Good job!","Successfully Added","success"),w()})).catch((e=>{f(!1),console.log(e),r()("Oops",e.message,"error")})))},children:[null===N.id?"Add":"Update"," Required File"]}),(0,b.jsxs)("button",{type:"button",onClick:()=>F(!1),className:"btn btn-danger",children:[" ",(0,b.jsx)("i",{className:"flaticon-delete-1"})," Discard"]})]})]})})})})]})]})},f=j}}]);
//# sourceMappingURL=949.719be3d2.chunk.js.map