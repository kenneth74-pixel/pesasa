"use strict";(self.webpackChunkpesasa=self.webpackChunkpesasa||[]).push([[985],{33450:(e,s,t)=>{t.r(s),t.d(s,{FilteringTable:()=>Y,default:()=>L});var a=t(72791),l=t(61146),n=t.n(l),i=t(66659),o=t(71358),d=t(92396),c=t(97311),r=(t(25161),t(62062)),m=t.n(r),h=t(34978),u=t(6639),x=t(42542),p=t(2499),j=t(65661),b=t(5289),y=t(39157),v=t(97123),g=t(91951),f=t(91523),N=t(5803),D=t(22389),w=t(82945),C=t(59513),M=t.n(C),S=t(80184);let k=(new Date).getFullYear();const A=[],E=(new Date).getFullYear();for(var F=2021;F<E;F++)A.push((0,S.jsx)("option",{value:F,children:F}));A.push((0,S.jsx)("option",{value:E,children:E}));const T=function(e,s){const t=[];for(var a=e;a<s;a++)t.push(a);return t.push(s),t}(2021,(new Date).getFullYear());const P=["January","February","March","April","May","June","July","August","September","October","November","December"],B=(0,N.ZP)((()=>(0,D.Z)(Promise.all([t.e(496),t.e(675)]).then(t.bind(t,78675)),1e3))),O=(0,N.ZP)((()=>(0,D.Z)(Promise.all([t.e(496),t.e(712)]).then(t.bind(t,45712)),1e3))),R=()=>(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(w.Z,{className:"dropdown custom-dropdown mb-0",children:[(0,S.jsx)(w.Z.Toggle,{variant:"",as:"div",className:"btn sharp tp-btn dark-btn i-false",children:(0,S.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,S.jsx)("path",{d:"M12 13C12.5523 13 13 12.5523 13 12C13 11.4477 12.5523 11 12 11C11.4477 11 11 11.4477 11 12C11 12.5523 11.4477 13 12 13Z",stroke:"#342E59","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),(0,S.jsx)("path",{d:"M12 6C12.5523 6 13 5.55228 13 5C13 4.44772 12.5523 4 12 4C11.4477 4 11 4.44772 11 5C11 5.55228 11.4477 6 12 6Z",stroke:"#342E59","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),(0,S.jsx)("path",{d:"M12 20C12.5523 20 13 19.5523 13 19C13 18.4477 12.5523 18 12 18C11.4477 18 11 18.4477 11 19C11 19.5523 11.4477 20 12 20Z",stroke:"#342E59","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]})}),(0,S.jsxs)(w.Z.Menu,{className:"dropdown-menu dropdown-menu-right",children:[(0,S.jsx)(w.Z.Item,{children:"Details "}),(0,S.jsx)(w.Z.Item,{className:"text-danger",children:"Cancel "})]})]})}),I=e=>{let{hideDetail:s,hideMenu:t,setRange:l,setAddFormDataTwo:n,getBuyersInfo:i,theNameToShow:o}=e;const[d,c]=(0,a.useState)("Medan, IDN"),[r,u]=(0,a.useState)({}),[x,p]=(0,a.useState)([0,0,0,0,0,0,0,0,0,0,0,0]),[j,b]=(0,a.useState)([]);const[y,v]=(0,a.useState)({startDate:new Date,endDate:new Date,days:"",name:"days",year:(new Date).getFullYear(),month:-1}),g=e=>{e.preventDefault();const s=e.target.getAttribute("name"),t=e.target.value,a={...y};a[s]=t,v(a)};function N(e){return null!==e&&void 0!==e?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):0}function D(e){(0,h.uN)(e).then((s=>{b(s),p(Math.random()),k=e})).catch((e=>{console.log(e),m()("Oops",e.message,"error")}))}return(0,a.useEffect)((()=>{D((new Date).getFullYear()),(0,h.Nj)().then((e=>{u(e)})).catch((e=>{console.log(e),m()("Oops",e.message,"error")}))}),[]),(0,S.jsxs)(S.Fragment,{children:[t?null:(0,S.jsxs)("div",{className:"mb-sm-5 mb-3 d-flex flex-wrap align-items-center text-head",children:[(0,S.jsx)("h2",{className:"font-w600 mb-2 me-auto",children:"Collections Summary"}),(0,S.jsx)(f.rU,{to:"#",className:"btn btn-primary mb-2 rounded",onClick:()=>(o(r.name),i(),void s(!0)),children:"Show Details"})]}),(0,S.jsxs)("div",{className:"row",children:[t?null:(0,S.jsx)("div",{className:"col-xl-4 col-xxl-4",children:(0,S.jsxs)("div",{className:"card",children:[(0,S.jsx)("div",{className:"card-header border-0",children:(0,S.jsx)("h4",{className:"mb-0 text-black fs-20",children:"Data Filters"})}),(0,S.jsxs)("div",{style:{padding:"20px"},children:[(0,S.jsx)("div",{style:{borderBottom:"1px solid #CCC",marginBottom:"20px",paddingBottom:"20px"},children:(0,S.jsxs)("div",{className:"form-group ",children:[(0,S.jsx)("b",{style:{color:"black"},children:(0,S.jsx)("u",{children:"Filter By No. Of Days"})}),(0,S.jsxs)("div",{className:"contact-name",children:[(0,S.jsx)("span",{className:"validation-text",children:" Collections waiting for more than "}),(0,S.jsxs)("div",{children:[(0,S.jsxs)("div",{className:"row",children:[(0,S.jsxs)("div",{className:"col-xl-6 col-xxl-6",children:[(0,S.jsx)("label",{className:"text-black font-w500",children:"Number"}),(0,S.jsx)("div",{className:"contact-name",children:(0,S.jsx)("input",{type:"text",className:"form-control",autoComplete:"off",name:"days",value:N(y.days),onChange:g,placeholder:"No. "})})]}),(0,S.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,S.jsxs)("div",{className:"form-group ",children:[(0,S.jsx)("label",{className:"text-black font-w500",children:"Select Type"}),(0,S.jsx)("div",{className:"form-group ",children:(0,S.jsxs)("select",{value:y.name,name:"name",onChange:g,defaultValue:"days",className:"form-control",id:"sel1",children:[(0,S.jsx)("option",{value:"days",children:"Days"}),(0,S.jsx)("option",{value:"weeks",children:"Weeks"}),(0,S.jsx)("option",{value:"months",children:"Months"}),(0,S.jsx)("option",{value:"years",children:"Years"})]})})]})})]}),(0,S.jsx)("button",{type:"button",className:"btn btn-primary shadow btn-xs ",style:{marginLeft:"15px",marginTop:"15px"},onClick:()=>(l("daysNumber"),n(y),void(0,h.a6)(y).then((e=>{u(e)})).catch((e=>{console.log(e),m()("Oops",e.message,"error")}))),"data-dismiss":"modal",children:"Pick Data"})]})]})]})}),(0,S.jsxs)("div",{className:"row",style:{borderBottom:"1px solid #CCC",marginBottom:"20px",paddingBottom:"20px",marginTop:"10px",width:"100%"},children:[(0,S.jsx)("b",{style:{color:"black"},children:(0,S.jsx)("u",{children:"Filter By Year / Month"})}),(0,S.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,S.jsxs)("div",{className:"form-group ",children:[(0,S.jsx)("label",{className:"text-black font-w500",children:"Year"}),(0,S.jsx)("div",{className:"form-group ",children:(0,S.jsx)("select",{value:y.year,name:"year",onChange:g,defaultValue:(new Date).getFullYear(),className:"form-control",id:"sel1",children:A})})]})}),(0,S.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,S.jsxs)("div",{className:"form-group ",children:[(0,S.jsx)("label",{className:"text-black font-w500",children:"Month"}),(0,S.jsx)("div",{className:"form-group ",children:(0,S.jsxs)("select",{value:y.month,name:"month",onChange:g,defaultValue:-1,className:"form-control",id:"sel1",children:[(0,S.jsx)("option",{value:-1,children:"None"}),(0,S.jsx)("option",{value:0,children:"January"}),(0,S.jsx)("option",{value:1,children:"Febuary"}),(0,S.jsx)("option",{value:2,children:"March"}),(0,S.jsx)("option",{value:3,children:"April"}),(0,S.jsx)("option",{value:4,children:"May"}),(0,S.jsx)("option",{value:5,children:"June"}),(0,S.jsx)("option",{value:6,children:"July"}),(0,S.jsx)("option",{value:7,children:"August"}),(0,S.jsx)("option",{value:8,children:"September"}),(0,S.jsx)("option",{value:9,children:"October"}),(0,S.jsx)("option",{value:10,children:"November"}),(0,S.jsx)("option",{value:11,children:"December"})]})})]})}),(0,S.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,S.jsx)("button",{type:"button",className:"btn btn-primary shadow btn-xs ",style:{marginLeft:"15px",marginTop:"15px"},onClick:()=>(l("yearOrMonth"),n(y),void(0,h.JA)(y).then((e=>{k!==y.year&&D(y.year),u(e)})).catch((e=>{console.log(e),m()("Oops",e.message,"error")}))),"data-dismiss":"modal",children:"Pick Data"})})]}),(0,S.jsxs)("div",{className:"row",style:{marginTop:"10px",width:"100%"},children:[(0,S.jsx)("b",{style:{color:"black"},children:(0,S.jsx)("u",{children:"Filter By Date Range"})}),(0,S.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,S.jsxs)("div",{className:"form-group mb-0",children:[(0,S.jsx)("label",{className:"text-black font-w500",children:"Start Date"}),(0,S.jsx)(M(),{dateFormat:"dd/MM/yyyy",className:"form-control",renderCustomHeader:e=>{let{date:s,changeYear:t,changeMonth:a,decreaseMonth:l,increaseMonth:n,prevMonthButtonDisabled:i,nextMonthButtonDisabled:o}=e;return(0,S.jsxs)("div",{style:{margin:10,display:"flex",justifyContent:"center"},children:[(0,S.jsx)("button",{onClick:l,disabled:i,children:"<"}),(0,S.jsx)("select",{value:s.getFullYear(),onChange:e=>{let{target:{value:s}}=e;return t(s)},children:T.map((e=>(0,S.jsx)("option",{value:e,children:e},e)))}),(0,S.jsx)("select",{value:P[s.getMonth()],onChange:e=>{let{target:{value:s}}=e;return a(P.indexOf(s))},children:P.map((e=>(0,S.jsx)("option",{value:e,children:e},e)))}),(0,S.jsx)("button",{onClick:n,disabled:o,children:">"})]})},placeholder:"Start Date",name:"startDate",selected:y.startDate,onChange:e=>{const s=e,t={...y};t.startDate=s,v(t)}})]})}),(0,S.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,S.jsxs)("div",{className:"form-group mb-0",children:[(0,S.jsx)("label",{className:"text-black font-w500",children:"End Date"}),(0,S.jsx)(M(),{dateFormat:"dd/MM/yyyy",className:"form-control",renderCustomHeader:e=>{let{date:s,changeYear:t,changeMonth:a,decreaseMonth:l,increaseMonth:n,prevMonthButtonDisabled:i,nextMonthButtonDisabled:o}=e;return(0,S.jsxs)("div",{style:{margin:10,display:"flex",justifyContent:"center"},children:[(0,S.jsx)("button",{onClick:l,disabled:i,children:"<"}),(0,S.jsx)("select",{value:s.getFullYear(),onChange:e=>{let{target:{value:s}}=e;return t(s)},children:T.map((e=>(0,S.jsx)("option",{value:e,children:e},e)))}),(0,S.jsx)("select",{value:P[s.getMonth()],onChange:e=>{let{target:{value:s}}=e;return a(P.indexOf(s))},children:P.map((e=>(0,S.jsx)("option",{value:e,children:e},e)))}),(0,S.jsx)("button",{onClick:n,disabled:o,children:">"})]})},placeholder:"End Date",name:"endDate",selected:y.endDate,onChange:e=>{const s=e,t={...y};t.endDate=s,v(t)}})]})}),(0,S.jsx)("div",{className:"col-xl-6 col-xxl-6",children:(0,S.jsx)("button",{type:"button",className:"btn btn-primary shadow btn-xs ",style:{marginLeft:"15px",marginTop:"15px"},onClick:()=>(l("dateRange"),n(y),void(0,h.QM)(y).then((e=>{u(e)})).catch((e=>{console.log(e),m()("Oops",e.message,"error")}))),"data-dismiss":"modal",children:"Pick Data"})})]})]})]})}),(0,S.jsx)("div",{className:t?"col-xl-12 col-xxl-12":"col-xl-8 col-xxl-8",children:(0,S.jsxs)("div",{className:"card",children:[(0,S.jsxs)("div",{className:"card-header border-0 pb-0",children:[(0,S.jsxs)("h4",{className:"mb-0 fs-20 text-black",children:["Collections Totals For ",r.name]}),(0,S.jsx)(R,{})]}),(0,S.jsx)("div",{className:"card-body",children:(0,S.jsxs)("div",{className:"bg-gradient-1 coin-holding flex-wrap",style:{flexDirection:"row"},children:[(0,S.jsx)("div",{className:"mb-2 coin-bx",style:{flex:1},children:(0,S.jsx)("div",{className:"d-flex align-items-center",children:(0,S.jsxs)("div",{className:"ms-3",children:[(0,S.jsx)("h4",{className:"coin-font font-w600 mb-0",children:"All Collections"}),(0,S.jsxs)("b",{className:"mb-0 op-6",style:{color:"#000"},children:["Total: ",r.allNumber]})]})})}),(0,S.jsx)("div",{className:"mb-2",style:{flex:1},children:(0,S.jsxs)("div",{className:"d-flex align-items-center",children:[(0,S.jsx)("div",{className:"coin-bx-one",children:"Total Cost:"}),(0,S.jsx)("div",{className:"ms-3",children:(0,S.jsxs)("h2",{className:"mb-0 text-primary coin-font-1",children:["UGX.",N(r.all)]})})]})}),(0,S.jsx)("div",{className:"mb-2"})]})})]})})]}),(0,S.jsxs)("div",{className:"row",children:[(0,S.jsxs)("div",{className:"col-xl-4",children:[(0,S.jsx)("div",{className:"row"}),(0,S.jsx)("div",{className:"row",children:r.length>0?(0,S.jsx)("div",{className:"col-xl-12 col-xxl-12 col-md-12",children:(0,S.jsxs)("div",{className:"card",children:[(0,S.jsxs)("div",{className:"card-header pb-0 border-0",children:[(0,S.jsx)("h4",{className:"mb-0 fs-20 text-black",children:"Current Graph"}),(0,S.jsx)(R,{})]}),(0,S.jsxs)("div",{className:"card-body py-2 text-center",children:[(0,S.jsx)("div",{id:"pieChart",className:"d-inline-block",children:(0,S.jsx)(B,{theData:r},r.approvedNumber)}),(0,S.jsx)("div",{className:"chart-items",children:(0,S.jsx)("div",{className:" col-xl-12 col-sm-12",children:(0,S.jsxs)("div",{className:"row text-black text-start fs-13 mt-4",children:[(0,S.jsxs)("span",{className:"mb-3 col-6",children:[(0,S.jsx)("svg",{className:"me-2",width:"19",height:"19",viewBox:"0 0 19 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,S.jsx)("rect",{width:"19",height:"19",rx:"9.5",fill:"#096"})}),"Paid"]}),(0,S.jsxs)("span",{className:"mb-3 col-6",children:[(0,S.jsx)("svg",{className:"me-2",width:"19",height:"19",viewBox:"0 0 19 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,S.jsx)("rect",{width:"19",height:"19",rx:"9.5",fill:"#F7A62C"})}),"Pending Collection"]}),(0,S.jsxs)("span",{className:"mb-3 col-6",children:[(0,S.jsx)("svg",{className:"me-2",width:"19",height:"19",viewBox:"0 0 19 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,S.jsx)("rect",{width:"19",height:"19",rx:"9.5",fill:"#F00"})}),"Overdue Collection"]})]})})})]})]})}):null})]}),j.length>0?(0,S.jsx)("div",{className:r.length>0?"col-xl-8":"col-xl-12",children:(0,S.jsx)("div",{className:"row",children:(0,S.jsx)("div",{className:"col-xl-12",children:(0,S.jsxs)("div",{className:"card",children:[(0,S.jsx)("div",{className:"card-header pb-0 border-0",children:(0,S.jsxs)("h4",{className:"fs-20 text-black mb-0",children:["Yearly  Collections Totals Summary For the Year ",y.year]})}),(0,S.jsx)("div",{className:"card-body pb-0 pt-3",children:(0,S.jsx)("div",{id:"marketChart",className:"market-line",children:(0,S.jsx)(O,{yearSum:j},x)})})]})})})}):null]})]})};t(43241);var Z=t(5970);const Y=()=>{const[e,s]=(0,a.useState)([]),[t,l]=(0,a.useState)([]),[r,f]=(0,a.useState)([]),[N,D]=(0,a.useState)("currentMonth"),[w,C]=(0,a.useState)(!1),[k,A]=(0,a.useState)(""),[E,F]=(0,a.useState)({}),[T,P]=(0,a.useState)({buyers:[],docs:[],directors:[],creditlimit:{}}),[B,O]=(0,a.useState)(!1),[R,Y]=(0,a.useState)(!1),[L,J]=(0,a.useState)({}),[H,V]=(0,a.useState)(""),[z,G]=(0,a.useState)([]),[_,U]=(0,a.useState)(!1),W=a.useRef(null),[K,Q]=(0,a.useState)(!1),[X,q]=(0,a.useState)(""),[$,ee]=(0,a.useState)(!1),[se,te]=(0,a.useState)(!1),[ae,le]=(0,a.useState)({}),[ne,ie]=(0,a.useState)(new Date),[oe,de]=(0,a.useState)(null),ce=function(e,s){const t=[];for(var a=e;a<s;a++)t.push(a);return t.push(s),t}(2021,(new Date).getFullYear());const re=["January","February","March","April","May","June","July","August","September","October","November","December"],[me,he]=(0,a.useState)([]);let[ue,xe]=(0,a.useState)({startDate:new Date,endDate:new Date,days:"",name:"days",year:(new Date).getFullYear(),month:-1});const[pe,je]=(0,a.useState)({id:null,name:"",sector:"",osector:"",country:"Uganda",city:"",town:"",streetaddress:"",contactPersonOne:"",phoneOne:"",designationOne:"",contactEmailOne:"",contactPersonTwo:"",phoneTwo:"",designationTwo:"",contactEmailTwo:"",clientBuyerId:null,terms:"choose",code:"+256",code2:"+256"});function be(e,s){A(0),he([]),(0,h.B)(e).then((e=>{const t=[];e.map((e=>{e.collType=e.isPastDue?"Past Due":"Normal Collection",e.dateAdded=(0,g.default)(new Date(e.dateAdded),"dd-MMM-yyyy"),e.actions=(0,S.jsxs)("div",{children:[(0,S.jsx)("button",{type:"button",className:"btn shadow btn-xs btn-secondary mt-4",onClick:()=>{O(!0),A(s),ie(new Date(e.dateAdded)),de(e.id)},"data-dismiss":"modal",children:"Edit"}),w?(0,S.jsx)(p.RotateSpinner,{size:100,color:"rgba(41, 106, 176,1)"}):(0,S.jsx)("button",{style:{marginRight:"10px",marginLeft:"10px",left:"10px",right:"10px"},type:"button",className:"btn shadow btn-xs btn-danger mt-4 ml-4 mr-4",onClick:()=>{var s;s=e.id,C(!0),(0,h.P4)(s).then((e=>{ee(!1),C(!1),m()("Success!","Successfully deleted collection","success")})).catch((e=>{C(!1),console.log(e),alert(e)}))},"data-dismiss":"modal",children:"Delete"})]}),e.amount=Ne(e.amount),t.push(e)})),O(!1),he(t)})).catch((e=>{C(!1),console.log(e),m()("Oops",e.message,"error")}))}function ye(e,s){!function(e){G([]),(0,h.C1)(e).then((e=>{G(e),C(!1)})).catch((e=>{C(!1),console.log(e),m()("Oops",e.message,"error")}))}({process:s,processId:e.id}),Y(!0),J({process:s,obj:e})}function ve(){ue.dataRange=N,(0,h.E0)(ue).then((e=>{const t=[],a=[];e.dataReturn.map((e=>{e.dateAdded=(0,g.default)(new Date(e.dateAdded),"dd-MMM-yyyy"),e.amount=Ne(e.amount),t.push(e)})),s(t),e.detailsOnly.map((e=>{e.collType=e.isPastDue?"Past Due":"Normal Collection",e.dateAdded=(0,g.default)(new Date(e.dateAdded),"dd-MMM-yyyy"),e.amount=Ne(e.amount),a.push(e)})),l(a)})).catch((e=>{console.log(e)}))}z.map((e=>{e.type="VERIFIED"===e.type?(0,S.jsxs)("div",{style:{color:"green"},children:[e.type," ",(0,S.jsx)("i",{className:"fa fa-check"})]}):"DECLINED"===e.type?(0,S.jsxs)("div",{style:{color:"red"},children:[e.type," ",(0,S.jsx)("i",{className:"fa fa-times"})]}):e.type,e.dateAdded=new Date(e.dateAdded).toDateString()})),e.map((e=>{e.collectionDateDisplay=(0,g.default)(new Date(e.collectionDate),"dd-MMM-yyyy"),e.displayDate=(0,g.default)(new Date(e.dateAdded),"dd-MMM-yyyy"),e.displayAmt=e.currency+" "+e.amount,e.add=e.city+" , "+e.country,e.actions=(0,S.jsxs)("div",{className:"",children:["CLIENT_ADDED"===e.type?null:(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("button",{type:"button",className:"btn btn-primary shadow btn-xs ",onClick:()=>function(e){F(e),we(!0)}(e),"data-dismiss":"modal",children:"DISBURSED"===e.progress||"PARTIALY_COLLECTED"===e.progress?"Collect":"Details"})}),(0,S.jsx)("div",{className:"mt-2",children:(0,S.jsx)("button",{type:"button",className:"btn btn-success shadow btn-xs ",onClick:()=>{be(e.id,e.totalDisbursed),ee(!0),le(e)},"data-dismiss":"modal",children:"Collections"})})]})})),(0,a.useEffect)((()=>{ve()}),[]);const ge=a.useCallback((()=>{U(!1)}),[]),fe=a.useCallback((()=>W.current),[W.current]);function Ne(e){return null!==e&&void 0!==e?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):0}Z.n.map((e=>(0,S.jsxs)("option",{value:e.dial_code,children:[" "," "+e.name+" ("+e.dial_code+" )"]}))),Z.n.map((e=>(0,S.jsxs)("option",{value:e.name,children:[" "," "+e.name+" "]})));const[De,we]=(0,a.useState)(!1),Ce=(0,a.useMemo)((()=>c.L),[]),Me=(0,a.useMemo)((()=>d),[]),Se=(0,o.useTable)({columns:Ce,data:Me,initialState:{pageIndex:0}},o.useFilters,o.useGlobalFilter,o.usePagination),[ke,Ae]=(0,a.useState)([]),{state:Ee}=Se,{globalFilter:Fe,pageIndex:Te}=Ee,Pe=[];return r.map((e=>{Pe.push((0,S.jsxs)("option",{disabled:e.amOwner,value:e.id,children:[e.name," ",e.amOwner?"(Already Added)":""]}))})),T.directors.map((e=>{e.status="VERIFIED"===e.status?(0,S.jsxs)("div",{style:{color:"green"},children:[e.status," ",(0,S.jsx)("i",{className:"fa fa-check"})]}):"REJECTED"===e.status?(0,S.jsxs)("div",{style:{color:"red"},children:[e.status," ",(0,S.jsx)("i",{className:"fa fa-times"})]}):e.status,e.actions=(0,S.jsx)("div",{className:"d-flex",children:(0,S.jsx)("button",{type:"button",className:"btn btn-primary shadow btn-xs ",onClick:()=>ye(e,"directors"),"data-dismiss":"modal",children:"view details"})})})),T.buyers.map((e=>{e.status="VERIFIED"===e.status?(0,S.jsxs)("div",{style:{color:"green"},children:[e.status," ",(0,S.jsx)("i",{className:"fa fa-check"})]}):"REJECTED"===e.status?(0,S.jsxs)("div",{style:{color:"red"},children:[e.status," ",(0,S.jsx)("i",{className:"fa fa-times"})]}):e.status,e.actions=(0,S.jsx)("div",{className:"d-flex",children:(0,S.jsx)("button",{type:"button",className:"btn btn-primary shadow btn-xs ",onClick:()=>ye(e,"buyers"),"data-dismiss":"modal",children:"view details"})})})),T.docs.map((e=>{e.status="VERIFIED"===e.status?(0,S.jsxs)("div",{style:{color:"green"},children:[e.status," ",(0,S.jsx)("i",{className:"fa fa-check"})]}):"REJECTED"===e.status?(0,S.jsxs)("div",{style:{color:"red"},children:[e.status," ",(0,S.jsx)("i",{className:"fa fa-times"})]}):e.status,e.view=(0,S.jsx)("div",{className:"d-flex",children:(0,S.jsx)("a",{target:"_blank",href:e.path,children:(0,S.jsx)("button",{type:"button",className:"btn btn-success shadow btn-xs ","data-dismiss":"modal",children:"view documnet"})})}),e.actions=(0,S.jsx)("div",{className:"d-flex",children:(0,S.jsx)("button",{type:"button",className:"btn btn-primary shadow btn-xs ",onClick:()=>ye(e,"docs"),"data-dismiss":"modal",children:"view details"})})})),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(b.Z,{disableEnforceFocus:!0,fullWidth:!0,maxWidth:"lg",open:$,onClose:ee,children:[(0,S.jsxs)(j.Z,{children:[(0,S.jsxs)("p",{children:["Client : ",ae.client]}),(0,S.jsxs)("p",{children:["Application Ref : ",ae.refference]}),(0,S.jsxs)("div",{className:"row",children:[(0,S.jsx)("div",{className:"col-lg-6 mb-2",children:(0,S.jsxs)("p",{children:["First disburment date: ",(0,S.jsx)("b",{children:(0,g.default)(void 0!==ae.firstDisburseDate?new Date(null===ae||void 0===ae?void 0:ae.firstDisburseDate):new Date,"dd-MMM-yyyy")})]})}),(0,S.jsx)("div",{className:"col-lg-6 mb-2",children:(0,S.jsxs)("p",{children:["Amount Disbursed : ",(0,S.jsx)("b",{children:Ne(ae.totalDisbursed)})]})}),(0,S.jsx)("div",{className:"col-lg-6 mb-2",children:(0,S.jsxs)("p",{children:["Finance Period : ",(0,S.jsx)("b",{children:ae.financePeriod})]})}),(0,S.jsx)("div",{className:"col-lg-6 mb-2",children:(0,S.jsxs)("p",{children:["Collection Due Date : ",(0,S.jsx)("b",{children:ae.collectionDateDisplay})]})}),(0,S.jsxs)("small",{children:["Collections Total: ",Ne(ae.totalCollected)]}),B?(0,S.jsxs)("div",{className:"row mt-4",style:{width:"100%",overflow:"hidden",paddingBottom:"10px",paddingTop:"10px",borderTop:"1px solid #666"},children:[(0,S.jsx)("div",{className:"col-xl-12 col-xxl-12 mb-4 mt-4",children:"Edit Collection"}),(0,S.jsx)("div",{className:"col-xl-5 col-xxl-5",children:(0,S.jsxs)("div",{className:"form-group mb-3",children:[(0,S.jsx)("label",{className:"text-black font-w500",children:"Collection Amount"}),(0,S.jsxs)("div",{className:"contact-name",children:[(0,S.jsx)("input",{type:"text",className:"form-control",autoComplete:"off",name:"amount2",disabled:"COLLECTED"===pe.progress,value:Ne(k),onChange:e=>{const s=e.target.value.split(",").join("");A(s)},placeholder:"Collection Amount"}),(0,S.jsx)("span",{className:"validation-text"})]})]})}),(0,S.jsx)("div",{className:"col-xl-5 col-xxl-5",children:(0,S.jsxs)("div",{className:"form-group mb-0",children:[(0,S.jsx)("label",{className:"text-black font-w500",children:"Collection Date"}),(0,S.jsx)(M(),{dateFormat:"dd/MM/yyyy",disabled:"COLLECTED"===pe.progress,className:"form-control",renderCustomHeader:e=>{let{date:s,changeYear:t,changeMonth:a,decreaseMonth:l,increaseMonth:n,prevMonthButtonDisabled:i,nextMonthButtonDisabled:o}=e;return(0,S.jsxs)("div",{style:{margin:10,display:"flex",justifyContent:"center"},children:[(0,S.jsx)("button",{onClick:l,disabled:i,children:"<"}),(0,S.jsx)("select",{value:s.getFullYear(),onChange:e=>{let{target:{value:s}}=e;return t(s)},children:ce.map((e=>(0,S.jsx)("option",{value:e,children:e},e)))}),(0,S.jsx)("select",{value:re[s.getMonth()],onChange:e=>{let{target:{value:s}}=e;return a(re.indexOf(s))},children:re.map((e=>(0,S.jsx)("option",{value:e,children:e},e)))}),(0,S.jsx)("button",{onClick:n,disabled:o,children:">"})]})},placeholder:"Collection Date",name:"dob",selected:ne,onChange:ie})]})}),(0,S.jsx)("div",{className:"col-xl-2 col-xxl-2  mt-4",children:w?(0,S.jsx)(p.RotateSpinner,{size:100,color:"rgba(41, 106, 176,1)"}):(0,S.jsx)("button",{type:"button",className:"btn shadow btn-xs btn-success mt-4",onClick:()=>function(){const e=k.toString().split(",").join(""),s={id:oe,applicationId:null,amount:e,dateAdded:ne,isFullyCollected:!0};""===k?m()("Oops","Please add amount","error"):(C(!0),(0,h.KM)(s).then((e=>{O(!1),ee(!1),C(!1),m()("Success!","Successfully updated","success")})).catch((e=>{C(!1),console.log(e),m()("Oops",e.message,"error")})))}(),"data-dismiss":"modal",children:"Save"})}),"    "]}):null]})]}),(0,S.jsxs)(y.Z,{children:[(0,S.jsx)(u.Z,{hideDataExport:!0,rows:me,columns:[{name:"user",title:"Added By"},{name:"refference",title:"Collection Ref."},{name:"dateAdded",title:"Collection Date"},{name:"amount",title:"Collection Amount"},{name:"collType",title:"Collection Type"},{name:"daysDue",title:"Past Due Days"},{name:"fineToPay",title:"Past due fine"},{name:"actions",title:"Actions"}],defaultExpandedGroups:[],grouping:[],defaultHiddenColumnNames:["refference"],defaultPageSize:0,hideSelectionExport:!0,infiniteScrolling:!0}),(0,S.jsxs)("p",{children:["First disburment date: ",(0,S.jsx)("b",{children:(0,g.default)(void 0!==ae.firstDisburseDate?new Date(null===ae||void 0===ae?void 0:ae.firstDisburseDate):new Date,"dd-MMM-yyyy")})]})]}),(0,S.jsx)(v.Z,{style:{width:"100%",overflow:"hidden"},children:(0,S.jsx)("button",{type:"button",className:"btn shadow btn-xs btn-primary",onClick:()=>ee(!1),"data-dismiss":"modal",children:"Close"})})]}),(0,S.jsx)(i.Z,{activeMenu:"Collections",motherMenu:"Loans"}),K?null:(0,S.jsx)("div",{children:_?(0,S.jsx)(n(),{onAfterPrint:ge,simple:!0,round:!0,trigger:()=>(0,S.jsx)("p",{style:{textAlign:"center"},children:(0,S.jsx)("button",{to:"#",className:"btn btn-success shadow btn-xs ",children:"Print"})}),content:fe}):(0,S.jsx)("div",{style:{textAlign:"center"},children:(0,S.jsx)("button",{to:"#",className:"btn btn-success  shadow btn-xs ",onClick:()=>U(!0),children:"Print Preview"})})}),K?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:"mb-sm-5 mb-3 d-flex flex-wrap align-items-center text-head",children:[(0,S.jsx)("h2",{className:"font-w600 mb-2 me-auto",children:"Collections Details"})," ",(0,S.jsx)("button",{to:"#",className:"btn btn-primary mb-2 rounded",onClick:()=>Q(!1),children:"Show Summary"})]}),De?(0,S.jsx)(x.Z,{reloadMe:function(e){(0,h.E0)().then((t=>{const a=[],n=[];t.dataReturn.map((s=>{s.dateAdded=(0,g.default)(new Date(s.dateAdded),"dd-MMM-yyyy"),s.amount=Ne(s.amount),e===s.id&&F(s),a.push(s)})),s(a),t.detailsOnly.map((e=>{e.collType=e.isPastDue?"Past Due":"Normal Collection",e.dateAdded=(0,g.default)(new Date(e.dateAdded),"dd-MMM-yyyy"),e.amount=Ne(e.amount),n.push(e)})),l(n)})).catch((e=>{console.log(e),m()("Oops",e.message,"error")}))},setPostModal:we,obj:E},E.status):(0,S.jsxs)("div",{className:"card",children:[(0,S.jsx)("div",{className:"card-header",children:(0,S.jsxs)("div",{className:"row",style:{width:"100%"},children:[(0,S.jsx)("div",{className:"col-xl-5 ",children:(0,S.jsxs)("h4",{className:"card-title",children:["Collections  for ",X]})}),(0,S.jsx)("div",{className:"col-xl-3",children:(0,S.jsx)("button",{className:"btn btn-primary mb-2 btn-xs ",onClick:()=>te(!se),children:"Toggle Collections"})})]})}),(0,S.jsxs)("div",{className:"card-body",children:[(0,S.jsx)("div",{className:"row",style:{width:"100%"},children:0===e.length?(0,S.jsx)(p.RotateSpinner,{size:100,color:"rgba(41, 106, 176,1)"}):null}),se?t.length>0?(0,S.jsx)(u.Z,{columns:[{name:"user",title:"Added By"},{name:"apprefference",title:"Application Ref."},{name:"dateAdded",title:"Collection Date"},{name:"recoveryMode",title:"Recovery Mode"},{name:"amount",title:"Collection Amount"},{name:"hasDiff",title:"Has Difference"},{name:"byHowMuch",title:"Difference Amount"},{name:"collType",title:"Collection Type"},{name:"daysDue",title:"Past Due Days"},{name:"fineToPay",title:"Past due fine"}],groupSummaryItems:[{columnName:"user",type:"count"}],totalSummaryItems:[{columnName:"user",type:"count"}],exportColumns:[{name:"user",title:"Added By"},{name:"apprefference",title:"Application Ref."},{name:"dateAdded",title:"Collection Date"},{name:"recoveryMode",title:"Recovery Mode"},{name:"amount",title:"Collection Amount"},{name:"hasDiff",title:"Has Difference"},{name:"byHowMuch",title:"Difference Amount"},{name:"collType",title:"Collection Type"},{name:"daysDue",title:"Past Due Days"},{name:"fineToPay",title:"Past due fine"}],exportRow:t,rows:t,defaultExpandedGroups:[],grouping:[],defaultHiddenColumnNames:[],defaultPageSize:0,hideSelectionExport:!0,infiniteScrolling:!0,fileName:"Collections for "+X}):"No data received yet, please be patient ....":e.length>0?(0,S.jsx)(u.Z,{hideDataExport:!0,rows:e,columns:[{name:"displayDate",title:"Application Date"},{name:"refference",title:"Application Ref."},{name:"client",title:"Client"},{name:"buyername",title:"Buyer"},{name:"displayAmt",title:"Amount"},{name:"collectionDateDisplay",title:"Collection Due Date"},{name:"status",title:"Status"},{name:"hasPastDue",title:"Has Past Due"},{name:"progress",title:"Progress"},{name:"actions",title:"Actions"}],defaultExpandedGroups:[],grouping:[],defaultHiddenColumnNames:["status"],defaultPageSize:0,hideSelectionExport:!0,infiniteScrolling:!0,fileName:"Directors"}):"No data received yet, please be patient ...."]})]})]}):(0,S.jsx)("div",{ref:W,children:(0,S.jsx)(I,{theNameToShow:q,getBuyersInfo:ve,setAddFormDataTwo:xe,setRange:D,hideMenu:_,hideDetail:Q},_)})]})},L=Y},25161:(e,s,t)=>{t(72791),t(80184)}}]);
//# sourceMappingURL=985.cc00f242.chunk.js.map